<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.1.1">Jekyll</generator><link href="https://earthly.dev/blog/feed.xml" rel="self" type="application/atom+xml" /><link href="https://earthly.dev/blog/" rel="alternate" type="text/html" /><updated>2021-06-29T09:20:19-04:00</updated><id>https://earthly.dev/blog/feed.xml</id><title type="html">Earthly Blog</title><subtitle>Build automation for the container era.</subtitle><entry><title type="html">SQL Errors and Video Cameras</title><link href="https://earthly.dev/blog/video-camera-on/" rel="alternate" type="text/html" title="SQL Errors and Video Cameras" /><published>2021-06-29T00:00:00-04:00</published><updated>2021-06-29T00:00:00-04:00</updated><id>https://earthly.dev/blog/video-camera-on</id><content type="html" xml:base="https://earthly.dev/blog/video-camera-on/">&lt;div class=&quot;narrow-code&quot;&gt;
&lt;p&gt;Some years ago, when I worked in a physical office, I was having trouble with a new report I was developing. The reasonably complex SQL that generated the report would sometimes be missing a single row that would reappear if I reran things.&lt;/p&gt;
&lt;p&gt;The SQL looked something like this:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb1&quot;&gt;&lt;pre class=&quot;sourceCode sql&quot;&gt;&lt;code class=&quot;sourceCode sql&quot;&gt;&lt;span id=&quot;cb1-1&quot;&gt;&lt;a href=&quot;#cb1-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;co&quot;&gt;-- sort and insert first partition into repo&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-2&quot;&gt;&lt;a href=&quot;#cb1-2&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;kw&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;INTO&lt;/span&gt; Report&lt;/span&gt;
&lt;span id=&quot;cb1-3&quot;&gt;&lt;a href=&quot;#cb1-3&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;kw&quot;&gt;SELECT&lt;/span&gt; name &lt;span class=&quot;kw&quot;&gt;FROM&lt;/span&gt; input1 &lt;/span&gt;
&lt;span id=&quot;cb1-4&quot;&gt;&lt;a href=&quot;#cb1-4&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;kw&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;BY&lt;/span&gt; val;&lt;/span&gt;
&lt;span id=&quot;cb1-5&quot;&gt;&lt;a href=&quot;#cb1-5&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt; &lt;/span&gt;
&lt;span id=&quot;cb1-6&quot;&gt;&lt;a href=&quot;#cb1-6&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;kw&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;FROM&lt;/span&gt; Report;&lt;/span&gt;
&lt;span id=&quot;cb1-7&quot;&gt;&lt;a href=&quot;#cb1-7&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;one&lt;/span&gt;
&lt;span id=&quot;cb1-8&quot;&gt;&lt;a href=&quot;#cb1-8&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;two&lt;/span&gt;
&lt;span id=&quot;cb1-9&quot;&gt;&lt;a href=&quot;#cb1-9&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;three &lt;span class=&quot;co&quot;&gt;-- yep&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-10&quot;&gt;&lt;a href=&quot;#cb1-10&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-11&quot;&gt;&lt;a href=&quot;#cb1-11&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;co&quot;&gt;-- sort and insert second partition into repo&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-12&quot;&gt;&lt;a href=&quot;#cb1-12&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;kw&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;INTO&lt;/span&gt; Report&lt;/span&gt;
&lt;span id=&quot;cb1-13&quot;&gt;&lt;a href=&quot;#cb1-13&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;kw&quot;&gt;SELECT&lt;/span&gt; name &lt;span class=&quot;kw&quot;&gt;FROM&lt;/span&gt; input2 &lt;/span&gt;
&lt;span id=&quot;cb1-14&quot;&gt;&lt;a href=&quot;#cb1-14&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;kw&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;BY&lt;/span&gt; val;&lt;/span&gt;
&lt;span id=&quot;cb1-15&quot;&gt;&lt;a href=&quot;#cb1-15&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-16&quot;&gt;&lt;a href=&quot;#cb1-16&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;kw&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;FROM&lt;/span&gt; Report;&lt;/span&gt;
&lt;span id=&quot;cb1-17&quot;&gt;&lt;a href=&quot;#cb1-17&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;one&lt;/span&gt;
&lt;span id=&quot;cb1-18&quot;&gt;&lt;a href=&quot;#cb1-18&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;two&lt;/span&gt;
&lt;span id=&quot;cb1-19&quot;&gt;&lt;a href=&quot;#cb1-19&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;three&lt;/span&gt;
&lt;span id=&quot;cb1-20&quot;&gt;&lt;a href=&quot;#cb1-20&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;four &lt;/span&gt;
&lt;span id=&quot;cb1-21&quot;&gt;&lt;a href=&quot;#cb1-21&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;five &lt;/span&gt;
&lt;span id=&quot;cb1-22&quot;&gt;&lt;a href=&quot;#cb1-22&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;six &lt;span class=&quot;co&quot;&gt;-- yep&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-23&quot;&gt;&lt;a href=&quot;#cb1-23&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-24&quot;&gt;&lt;a href=&quot;#cb1-24&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;kw&quot;&gt;SELECT&lt;/span&gt; top &lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;FROM&lt;/span&gt; Report;&lt;/span&gt;
&lt;span id=&quot;cb1-25&quot;&gt;&lt;a href=&quot;#cb1-25&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;one&lt;/span&gt;
&lt;span id=&quot;cb1-26&quot;&gt;&lt;a href=&quot;#cb1-26&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;two&lt;/span&gt;
&lt;span id=&quot;cb1-27&quot;&gt;&lt;a href=&quot;#cb1-27&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;four &lt;span class=&quot;co&quot;&gt;-- wait, what?&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I was going to spend the morning tracking this down. That was my daily stand-up update. But when I gave it, I caught a look from my teammate Isabella (not her real name). The look helped me solve the problem. We’ll get to the solution in a moment, but I want to talk about that facial expression – I am always on the lookout for it now.&lt;/p&gt;
&lt;h2 id=&quot;the-wait-what-look&quot;&gt;The Wait-What? Look&lt;/h2&gt;
&lt;div class=&quot;align-right&quot;&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/video-camera-on/confused1-500-a0a7ebe24.webp 500w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/video-camera-on/confused1-500-b12c046e3.png 500w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;260px&quot; src=&quot;/blog/generated/assets/images/video-camera-on/confused1-800-b12c046e3.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;figcaption&gt;
“I’ve traced it to a bug in the SMTP protocol”
&lt;/figcaption&gt;
&lt;/div&gt;
&lt;p&gt;I once saw someone go up to a post-office box and confidently empty their lunch garbage into it - like it was a food court garbage bin. I made the facial expression then - I could feel my lips pull to one side and my eyes narrow in confusion. Am I seeing this correctly?&lt;/p&gt;
&lt;p&gt;I’ve spotted this look in so many daily stand-ups since then. Usually, it’s very fleeting, but I try not to let it pass by unremarked because unpacking it can save so much time. It easy to thrash on a problem and forget some simple assumption you’ve made. This face is a sign you’ve overlooked something important.&lt;/p&gt;
&lt;p&gt;Are daily stand-ups valuable? Sometimes they are, and sometimes they aren’t&lt;a href=&quot;#fn1&quot; class=&quot;footnote-ref&quot; id=&quot;fnref1&quot; role=&quot;doc-noteref&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;. If you’re blocked on something, then telling the team is essential, but you shouldn’t wait for the next stand-up to share that. There are also all kinds of social reasons why a stand-up is healthy. I work from my home office and have for many years, and a video stand-up is a great way to actually have some small talk, screen to screen, with my teammates. Some parts of a daily stand-up are just a status report, and I’m not sure that ‘what I did yesterday and what I’m doing today part’ is always valuable. But the actual off-topic parts of a stand-up – the part where I complain about how difficult it is to get a permit for building my deck, and where Alex explains about foraging for mushrooms – those parts help keep me sane and happy.&lt;/p&gt;
&lt;h2 id=&quot;thats-not-quite-right&quot;&gt;That’s Not Quite Right&lt;/h2&gt;
&lt;div class=&quot;align-left&quot;&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/video-camera-on/confused2-500-1f53a66bd.webp 500w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/video-camera-on/confused2-500-4089110d6.png 500w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;260px&quot; src=&quot;/blog/generated/assets/images/video-camera-on/confused2-800-4089110d6.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;figcaption&gt;
“I’m inserting ‘foo’ but retrieving ‘disk is full’”
&lt;/figcaption&gt;
&lt;/div&gt;
&lt;p&gt;We are always simulating the world around us on some subconscious level. It helps us predict what is going to happen next. For example, my neighbor is out watering his grass right now – I can see him out my office window. If his hose wasn’t on, I’m not sure I would notice because I’m not paying that much attention. But if he casually jumped from the ground to the second-story roof of his house, it would become the center of my attention. It would trigger some that’s-not-quite-right effect, and I would unconsciously make that confused face.&lt;/p&gt;
&lt;p&gt;That is why a stand-up can be valuable, in person or screen to screen. You can give your update when you are stuck, and you can watch for that failed-simulation face. Then ask them what they are thinking. Chances are they know where you missed a step or where you have a false assumption. At the very least, you’ve violated their intuition about the problem, and unpacking that feeling is a good idea.&lt;/p&gt;
&lt;h2 id=&quot;non-verbal-communication-requires-cameras-on&quot;&gt;Non-Verbal Communication Requires Cameras On&lt;/h2&gt;
&lt;div class=&quot;align-right&quot;&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/video-camera-on/confused3-500-957022048.webp 500w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/video-camera-on/confused3-500-7d0fb7a4e.png 500w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;260px&quot; src=&quot;/blog/generated/assets/images/video-camera-on/confused3-800-7d0fb7a4e.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;figcaption&gt;
“All users were created on a Thursday in 1970”
&lt;/figcaption&gt;
&lt;/div&gt;
&lt;p&gt;I’ve heard many times before that 70% of communication is non-verbal. This seems to oversell non-verbals or maybe I’m just not great at reading them. This whole confused-face signal could be replaced with chin-scratching emoji or a sign that said: “Wait, What?”. But, when I do get a non-verbal signal, it can save me hours and days of time. I don’t think you can easily replicate this signal with asynchronous communication. One reason is that these non-verbal cues often represent subtle feelings. Someone can hear your update and think to themselves, “That doesn’t sound right”, but they may not be comfortable enough or care enough to say it out loud. Or it’s just fleeting thought before they start their own update. You have to catch these expressions, and you can’t do it without seeing the person.&lt;/p&gt;
&lt;p&gt;This doesn’t mean that everyone should always be able to see everyone in every meeting. If you are joining a 50 person meeting with a single presenter and everyone has their camera off, then follow suit. If you are eating your lunch in a meeting, I don’t need to see or hear you chew. But if you are seeking help or giving help or pairing on an issue with me, then I want to see your face. The examples and facial expressions here are extreme but even just seeing that I’ve gone too fast and lost you, or that you’re starting to say something, can improve the fidelity of the conversation.&lt;/p&gt;
&lt;p&gt;People find zoom meetings fatiguing, and I get that. The world contains too many meetings. But I’m shocked when I talk to someone on a remote team that never uses video. If you’re not seeing your teammate’s face when you describe a problem, who knows what you are missing&lt;a href=&quot;#fn2&quot; class=&quot;footnote-ref&quot; id=&quot;fnref2&quot; role=&quot;doc-noteref&quot;&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;the-sql-solution&quot;&gt;The SQL Solution&lt;/h2&gt;
&lt;div class=&quot;align-left&quot;&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/video-camera-on/confused4-500-55b7c9ac2.webp 500w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/video-camera-on/confused4-500-4d79dd6c3.png 500w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;260px&quot; src=&quot;/blog/generated/assets/images/video-camera-on/confused4-800-4d79dd6c3.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;figcaption&gt;
“the max message size in the queue&lt;br/&gt; is now 2 gigabytes”
&lt;/figcaption&gt;
&lt;/div&gt;
&lt;p&gt;So about the SQL. I got &lt;code&gt;the look&lt;/code&gt; from Isabella because a select statement like I was describing should be deterministic. Isabella’s spidey-sense told her either I was wrong about results changing or I was misusing SQL. It turned out to be the latter.&lt;/p&gt;
&lt;p&gt;You see, I was inserting records sorted and selecting them out without an explicit order. Also, my simple recounting of the report’s logic (and my code snippet above) was missing a critical detail – one I had forgotten about&lt;a href=&quot;#fn3&quot; class=&quot;footnote-ref&quot; id=&quot;fnref3&quot; role=&quot;doc-noteref&quot;&gt;&lt;sup&gt;3&lt;/sup&gt;&lt;/a&gt;. Sometimes I had to delete duplicate keys from the report table. Guess what happens when you insert things in-order into a table with deleted rows? Its implementation-specific, but sometimes, the invisible spaces left by the deleted rows will be filled in by the inserted data, undoing the insertion order. My row wasn’t missing. My data just wasn’t sorted correctly. Once I added in an &lt;code&gt;order by&lt;/code&gt; everything worked.&lt;/p&gt;
&lt;/div&gt;
&lt;!-- markdownlint-disable MD046 --&gt;
&lt;section class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot; role=&quot;doc-endnote&quot;&gt;&lt;p&gt;&lt;a href=&quot;http://localhost:4002/blog/thought-leaders/&quot;&gt;Like everything&lt;/a&gt;, they work well in some contexts and not in others. If they aren’t helpful, drop them and try something else.&lt;a href=&quot;#fnref1&quot; class=&quot;footnote-back&quot; role=&quot;doc-backlink&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&quot;fn2&quot; role=&quot;doc-endnote&quot;&gt;&lt;p&gt;I’ve run this idea by people I know who work remotely and never turn their camera on. Not everyone is convinced, and I find that genuinely confusing. Maybe they have a lot of useless meetings? Perhaps the local culture is against cameras? Or maybe they always know what they are doing, and I never do?&lt;a href=&quot;#fnref2&quot; class=&quot;footnote-back&quot; role=&quot;doc-backlink&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id=&quot;fn3&quot; role=&quot;doc-endnote&quot;&gt;&lt;p&gt;I’ve run this idea by people I know who work remotely and never turn their camera on. Not everyone is convinced, and I find that genuinely confusing. Maybe they have a lot of useless meetings? Perhaps the local culture is against cameras? Or maybe they always know what they are doing, and I never do?&lt;a href=&quot;#fnref3&quot; class=&quot;footnote-back&quot; role=&quot;doc-backlink&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content><author><name>Adam Gordon Bell</name></author><category term="Articles" /><summary type="html"></summary></entry><entry><title type="html">Linting Markdown And Documentation</title><link href="https://earthly.dev/blog/markdown-lint/" rel="alternate" type="text/html" title="Linting Markdown And Documentation" /><published>2021-06-25T00:00:00-04:00</published><updated>2021-06-25T00:00:00-04:00</updated><id>https://earthly.dev/blog/markdown-lint</id><content type="html" xml:base="https://earthly.dev/blog/markdown-lint/">&lt;p&gt;Many linting, code formatting, and static analysis tools exist for code. You can use &lt;code&gt;eslint&lt;/code&gt;, &lt;code&gt;gofmt&lt;/code&gt;, or many other static analysis tools, combined with a great continuous integration process, and ensure that your code stays in good shape. But what about markdown files and documentation? How do you ensure you aren’t committing spelling and grammar mistakes? How do you ensure your files are valid markdown and that the language you are using is clear and correct? You can do this and more with a documentation linter.&lt;/p&gt;
&lt;p&gt;Many tools exist for finding problems in text files. You can use this list as a starting point for finding the markdown and prose linting tools that best fit your needs.&lt;/p&gt;
&lt;div class=&quot;notice--success notice--big&quot;&gt;
&lt;p&gt;&lt;strong&gt;Docs as Code&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The movement behind testing and linting prose is known as &lt;a href=&quot;https://www.writethedocs.org/guide/docs-as-code/&quot;&gt;Docs as Code&lt;/a&gt;, and the &lt;a href=&quot;https://www.writethedocs.org/&quot;&gt;Writing The Docs&lt;/a&gt; website is a great place to learn more.&lt;/p&gt;
&lt;/div&gt;
&lt;h2 id=&quot;criteria&quot;&gt;Criteria&lt;/h2&gt;
&lt;p&gt;For Ease of skimming, I’ll rate each tool based on this criteria:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Formatting:&lt;/strong&gt; The ability to find errors in the formatting of text files (markdown, txt, asciidoc).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Spelling:&lt;/strong&gt; The ability to find spelling mistakes.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Grammar:&lt;/strong&gt; The ability to detect grammar errors.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Clarity:&lt;/strong&gt; The ability to suggest changes that can improve writing clarity.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Additionally, I will rate tools based on their feature set:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Remediation:&lt;/strong&gt; The ability to fix errors without manual intervention.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Customization:&lt;/strong&gt; How well the tool can be customized to fit your use case. If you can’t exclude a rule or disable a warning, CI usage may be challenging. The most robust tools support custom rules and documentation style guides.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Integrated Developer Environment (IDE) support:&lt;/strong&gt; Ability to use in common code editors&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Continuous Integration (CI) / Command Line Interface (CLI) Usage:&lt;/strong&gt; Ability to be used at the command line and in a continuous integration environment.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;markdown-lint&quot;&gt;&lt;a href=&quot;https://github.com/DavidAnson/markdownlint&quot;&gt;Markdown Lint&lt;/a&gt;&lt;/h2&gt;
&lt;div class=&quot;wide&quot;&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/markdownlint4-800-99dd9fb9b.webp 800w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/markdownlint4-800-6efec2026.png 800w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;1200px&quot; src=&quot;/blog/generated/assets/images/markdown-lint/markdownlint4-800-6efec2026.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;markdownlint&lt;/code&gt; is a node.js markdown linter that is easy to install and easy to customize. It is based on an earlier Ruby tool, also called &lt;a href=&quot;https://github.com/markdownlint/markdownlint&quot;&gt;markdownlint&lt;/a&gt;. Both are great, but the Node.js tool is easy to install and easy to customize.&lt;/p&gt;
&lt;p&gt;You can disable specific rules inline ( &lt;code&gt;&amp;lt;!-- markdownlint-disable-file MD001 --&amp;gt;&lt;/code&gt; ) and set up a per-project config in a &lt;code&gt;.markdownlintrc&lt;/code&gt; file. It also supports writing custom rules in JavaScript and can remediate many problems itself with the &lt;code&gt;fix&lt;/code&gt; option:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;markdownlint --fix &amp;quot;./_posts/*.md&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It doesn’t handle spelling, grammar, or sentence structure, but it can’t be beaten for dealing with markdown structure and it has a great online &lt;a href=&quot;https://dlaa.me/markdownlint/&quot;&gt;demo site&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;coverage&quot;&gt;Coverage&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Formatting: 5&lt;/li&gt;
&lt;li&gt;Spelling: 0&lt;/li&gt;
&lt;li&gt;Grammar: 0&lt;/li&gt;
&lt;li&gt;Clarity: 0&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;features&quot;&gt;Features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Ease of Use: 5&lt;/li&gt;
&lt;li&gt;Remediation: 5&lt;/li&gt;
&lt;li&gt;Customization: 5&lt;/li&gt;
&lt;li&gt;IDE support: 5&lt;/li&gt;
&lt;li&gt;CI / CLI Support: 5&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;mdspell&quot;&gt;&lt;a href=&quot;https://www.npmjs.com/package/markdown-spellcheck&quot;&gt;mdspell&lt;/a&gt;&lt;/h2&gt;
&lt;div class=&quot;wide&quot;&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/mdspell1-800-4bbda79e3.webp 800w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/mdspell1-800-bd48f06c2.png 800w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;1200px&quot; src=&quot;/blog/generated/assets/images/markdown-lint/mdspell1-800-bd48f06c2.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;mdspell&lt;/code&gt; is a tool specifically for spelling checking markdown documents. Install it like this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm i markdown-spellcheck -g    &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can run it on markdown files in an interactive mode that builds up a custom dictionary of exceptions. You can then use that list later in a continuous integration process.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mdspell -n -a --en-us  ./blog/_posts/2021-02-11-mitmproxy.md&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The downsides of &lt;code&gt;mdspell&lt;/code&gt; are that the dictionary will likely complain about lots of words that are quite common. It may take some time to build up a list of exceptions. As a shortcut, you might be able to find some more &lt;code&gt;.spelling&lt;/code&gt; files on GitHub.&lt;/p&gt;
&lt;h3 id=&quot;coverage-1&quot;&gt;Coverage&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Formatting: 0&lt;/li&gt;
&lt;li&gt;Spelling: 5&lt;/li&gt;
&lt;li&gt;Grammar: 0&lt;/li&gt;
&lt;li&gt;Clarity: 0&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;features-1&quot;&gt;Features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Ease of Use: 5&lt;/li&gt;
&lt;li&gt;Remediation: 5&lt;/li&gt;
&lt;li&gt;Customization: 5&lt;/li&gt;
&lt;li&gt;IDE support: 5&lt;/li&gt;
&lt;li&gt;CI / CLI Support: 5&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;alex&quot;&gt;&lt;a href=&quot;https://alexjs.com/&quot;&gt;alex&lt;/a&gt;&lt;/h2&gt;
&lt;div class=&quot;wide&quot;&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/alex-800-446c930fd.webp 800w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/alex-800-f6710f0a0.png 800w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;1200px&quot; src=&quot;/blog/generated/assets/images/markdown-lint/alex-800-f6710f0a0.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;alex&lt;/code&gt; does one thing: catches insensitive and inconsiderate writing. It supports markdown files, and works via command-line, and has various IDE integrations. The specificity of &lt;code&gt;alex&lt;/code&gt; is its strength. For my rubric, I am scoring it under clarity as catching insensitive writing certainly improves clarity.&lt;/p&gt;
&lt;h3 id=&quot;coverage-2&quot;&gt;Coverage&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Formatting: 0&lt;/li&gt;
&lt;li&gt;Spelling: 0&lt;/li&gt;
&lt;li&gt;Grammar: 0&lt;/li&gt;
&lt;li&gt;Clarity: 3&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;features-2&quot;&gt;Features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Ease of Use: 5&lt;/li&gt;
&lt;li&gt;Remediation: 5&lt;/li&gt;
&lt;li&gt;Customization: 5&lt;/li&gt;
&lt;li&gt;IDE support: 5&lt;/li&gt;
&lt;li&gt;CI / CLI Support: 5&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;write-good&quot;&gt;&lt;a href=&quot;https://github.com/btford/write-good&quot;&gt;&lt;code&gt;write-good&lt;/code&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;div class=&quot;wide&quot;&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/write-good-800-b8501ff39.webp 800w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/write-good-800-425f5519d.png 800w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;1200px&quot; src=&quot;/blog/generated/assets/images/markdown-lint/write-good-800-425f5519d.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;write-good&lt;/code&gt; is designed for “developers who can’t write good and wanna learn to do other stuff good too.” The tool’s focus is on improving the clarity of writing (and helping developers write well).&lt;/p&gt;
&lt;p&gt;Install:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm install -g write-good&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Run:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ write-good ./blog/_posts/2021-02-11-mitmproxy.md
here are several ways to accomplish this.
                         ^^^^^^^^^^
&amp;quot;accomplish&amp;quot; is wordy or unneeded on line 305 at column 26
-------------
e-ca-certificates` is an excellent proof of concept, but if you want to run a do
                         ^^^^^^^^^
&amp;quot;excellent&amp;quot; is a weasel word on line 367 at column 84&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;write-good&lt;/code&gt; has many exciting suggestions. It will highlight passive voice, cliches, weak adverbs, and much more. Unfortunately, it’s not easy to exclude items or configure rules. It might be helpful as a writing suggestion tool, but this lack of configurability means you will have difficulty using it in a continuous integration process.&lt;/p&gt;
&lt;h3 id=&quot;coverage-3&quot;&gt;Coverage&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Formatting: 0&lt;/li&gt;
&lt;li&gt;Spelling: 0&lt;/li&gt;
&lt;li&gt;Grammar: 0&lt;/li&gt;
&lt;li&gt;Clarity: 2&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;features-3&quot;&gt;Features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Ease of Use: 5&lt;/li&gt;
&lt;li&gt;Remediation: 0&lt;/li&gt;
&lt;li&gt;Customization: 1&lt;/li&gt;
&lt;li&gt;IDE support: 2&lt;/li&gt;
&lt;li&gt;CI / CLI Support: 2&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;textlint&quot;&gt;&lt;a href=&quot;https://textlint.github.io/&quot;&gt;textlint&lt;/a&gt;&lt;/h2&gt;
&lt;div class=&quot;wide&quot;&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/textlint-800-6eb4f859e.webp 800w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/textlint-800-17ad92e53.png 800w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;1200px&quot; src=&quot;/blog/generated/assets/images/markdown-lint/textlint-800-17ad92e53.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;textlint&lt;/code&gt; is a pluggable linting tool that supports markdown, plain text, and HTML. The plug-in architecture means that it can offer the features of some of the previous items by wrapping them up as a plug-in. It has a &lt;a href=&quot;https://github.com/textlint/textlint/wiki/Collection-of-textlint-rule#rules-english&quot;&gt;plug-in&lt;/a&gt; for &lt;code&gt;alex&lt;/code&gt;, &lt;code&gt;write-good&lt;/code&gt;, and for many spell checkers and grammar checkers. The downside of this flexibility is that it is a bit harder to set up and configure: you have to install each plug-in separately.&lt;/p&gt;
&lt;p&gt;Install:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ npm install textlint --global
# install each plugin
$ npm install --global textlint-rule-no-todo
....
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Run:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;textlint &amp;quot;docs/**&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;textlint&lt;/code&gt; is configurable via an &lt;code&gt;textlintrc&lt;/code&gt; and has inline exclude rules ( &lt;code&gt;&amp;lt;!-- textlint-disable ruleA,ruleB --&amp;gt;&lt;/code&gt; ) – which may make it a possible way to use &lt;code&gt;write-good&lt;/code&gt; or other tools that lack this functionality.&lt;/p&gt;
&lt;h3 id=&quot;coverage-4&quot;&gt;Coverage&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Formatting: 0&lt;/li&gt;
&lt;li&gt;Spelling: 3&lt;/li&gt;
&lt;li&gt;Grammar: 3&lt;/li&gt;
&lt;li&gt;Clarity: 4&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;features-4&quot;&gt;Features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Ease of Use: 1&lt;/li&gt;
&lt;li&gt;Remediation: 3&lt;/li&gt;
&lt;li&gt;Customization: 4&lt;/li&gt;
&lt;li&gt;IDE support: 5&lt;/li&gt;
&lt;li&gt;CI / CLI Support: 2&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;proselint&quot;&gt;&lt;a href=&quot;http://proselint.com/&quot;&gt;proselint&lt;/a&gt;&lt;/h2&gt;
&lt;div class=&quot;wide&quot;&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/proselint-800-b152ebcc0.webp 800w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/proselint-800-e7264b476.png 800w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;1200px&quot; src=&quot;/blog/generated/assets/images/markdown-lint/proselint-800-e7264b476.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;proselint&lt;/code&gt; goes deep on writing clarity improvements in the same way the &lt;code&gt;alex&lt;/code&gt; goes deep on inclusive writing:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;proselint&lt;/code&gt; places the world’s greatest writers and editors by your side, where they whisper suggestions on how to improve your prose. You’ll be guided by advice inspired by Bryan Garner, David Foster Wallace, Chuck Palahniuk, Steve Pinker, Mary Norris, Mark Twain, Elmore Leonard, George Orwell, Matthew Butterick, William Strunk, E. B. White, Philip Corbett, Ernest Gowers, and the editorial staff of the world’s finest literary magazines and newspapers, among others. Our goal is to aggregate knowledge about best practices in writing and to make that knowledge immediately accessible to all authors in the form of a linter for prose.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Some of the writing advice included is great:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;echo &amp;quot;The very first thing you&amp;#39;ll see at the top of every (well-written) bash script &amp;quot; | proselint
&amp;lt;stdin&amp;gt;:1:5: weasel_words.very Substitute &amp;#39;damn&amp;#39; every time you&amp;#39;re inclined to write &amp;#39;very&amp;#39;; your editor will delete it and the writing will be just as it should be.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;echo &amp;quot;Thankfully, not all the advice I received was bad. &amp;quot; | proselint
&amp;lt;stdin&amp;gt;:1:2: skunked_terms.misc &amp;#39;Thankfully,&amp;#39; is a bit of a skunked term — impossible to use without issue. Find some other way to say it.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;echo &amp;quot;it is worth noting that both for CI and CD, the operating principles and coding philosophy are equally as important as the technical aspect of the implementation.&amp;quot; | proselint
&amp;lt;stdin&amp;gt;:1:96: after_the_deadline.redundancy Redundancy. Use &amp;#39;as&amp;#39; instead of &amp;#39;equally as&amp;#39;.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This one is awesome considering the context of the &lt;a href=&quot;/blog/thought-leaders/&quot;&gt;original article&lt;/a&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;echo &amp;quot;thought leaders&amp;quot; | proselint
&amp;lt;stdin&amp;gt;:1:2: cliches.garner &amp;#39;thought leaders&amp;#39; is cliché.&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt; echo &amp;quot;One elephant in the room with ngrok is&amp;quot; | proselint
&amp;lt;stdin&amp;gt;:1:5: corporate_speak.misc Minimize your use of corporate catchphrases like this one.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Learning from all the best writers is a very lofty objective, and &lt;code&gt;proselint&lt;/code&gt; has accumulated some valuable rules, but it falls short of its goal of collecting all the worlds writing advice in a parsable form. Ignoring and excluding rules are also not fully supported.&lt;/p&gt;
&lt;h3 id=&quot;coverage-5&quot;&gt;Coverage&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Formatting: 0&lt;/li&gt;
&lt;li&gt;Spelling: 0&lt;/li&gt;
&lt;li&gt;Grammar: 0&lt;/li&gt;
&lt;li&gt;Clarity: 5&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;features-5&quot;&gt;Features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Ease of Use: 5&lt;/li&gt;
&lt;li&gt;Remediation: 0&lt;/li&gt;
&lt;li&gt;Customization: 0&lt;/li&gt;
&lt;li&gt;IDE support: 5&lt;/li&gt;
&lt;li&gt;CI / CLI Support: 2&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;vale&quot;&gt;&lt;a href=&quot;https://github.com/errata-ai/vale&quot;&gt;Vale&lt;/a&gt;&lt;/h2&gt;
&lt;div class=&quot;wide&quot;&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/vale-800-337217691.webp 800w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/markdown-lint/vale-800-8ff190de8.png 800w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;1200px&quot; src=&quot;/blog/generated/assets/images/markdown-lint/vale-800-8ff190de8.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Vale, created by Joseph Kato, supports spelling, grammar, and clarity checks. It is extendable using a YAML rule format and is designed around the idea of a style guide – a specific house style that you put together and vale enforces. It has an implementation of most &lt;code&gt;proselint&lt;/code&gt; as a style guide, most of &lt;code&gt;write-good&lt;/code&gt;, as well as the &lt;a href=&quot;https://docs.microsoft.com/en-us/style-guide/welcome/&quot;&gt;Microsoft Writing Style Guide&lt;/a&gt; and the Google &lt;a href=&quot;https://developers.google.com/style/&quot;&gt;developer documentation style guide&lt;/a&gt;. Vale is targeted directly at the Docs-as-Code community and documentation teams, who take the writing style of documents very seriously.&lt;/p&gt;
&lt;p&gt;Vale is fast and configurable but not necessarily easy to get started with. Initially, I couldn’t get it to find any problems until I realized that it needs a config file to run:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;MinAlertLevel = suggestion

[*]
BasedOnStyles = Vale&lt;/code&gt;&lt;/pre&gt;
&lt;figcaption&gt;
.vale.ini
&lt;/figcaption&gt;
&lt;p&gt;Additionally, to use it effectively, you will need to copy an existing style-guide into your repository. Separating the styles from the tool is Vale’s biggest strength. It’s also could be a weakness as the rules you build up are specific to your repository. It is easy to write and customize rules but hard to share them back as they need to live in your source code repository.&lt;/p&gt;
&lt;p&gt;Besides the official Vale style guides &lt;a href=&quot;https://buildkite.com/blog/linting-the-buildkite-docs&quot;&gt;Buildkite&lt;/a&gt;, &lt;a href=&quot;https://github.com/linode/docs/tree/develop/ci/vale/styles&quot;&gt;Linode&lt;/a&gt;, and &lt;a href=&quot;https://github.com/testthedocs/vale-styles&quot;&gt;Write The Docs&lt;/a&gt; have rules online that you can copy into your repo or use as inspiration for your own rules.&lt;/p&gt;
&lt;p&gt;If you are taking linting documentation seriously and can take the time to set up a style that works for you, then Vale is the way to go. The rules of most other tools can be implemented inside value, and many already are.&lt;/p&gt;
&lt;h3 id=&quot;coverage-6&quot;&gt;Coverage&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Formatting: 2&lt;/li&gt;
&lt;li&gt;Spelling: 5&lt;/li&gt;
&lt;li&gt;Grammar: 5&lt;/li&gt;
&lt;li&gt;Clarity: 5&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;features-6&quot;&gt;Features&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Ease of Use: 1&lt;/li&gt;
&lt;li&gt;Remediation: 0&lt;/li&gt;
&lt;li&gt;Customization: 5&lt;/li&gt;
&lt;li&gt;IDE support: 5&lt;/li&gt;
&lt;li&gt;CI / CLI Support: 5&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;vale-styles&quot;&gt;Vale Styles&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/topics/vale-linter-style&quot;&gt;Official Styles&lt;/a&gt;&lt;br /&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/search?q=topic%3Avale-linter-style+org%3Atestthedocs+fork%3Atrue&quot;&gt;Write The Docs Styles&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/testthedocs/Openly&quot;&gt;Grammarly Clone in Vale&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt;
&lt;p&gt;Many tools exist for testing and linting English prose. You can start as simply as just spelling checking your readme before you commit it or go as complex as a full style guide running on every change to your software documentation.&lt;/p&gt;
&lt;p&gt;If you are willing to invest the time, then &lt;code&gt;Vale&lt;/code&gt;, with its flexible rules, is the clear leader. Combining &lt;code&gt;Vale&lt;/code&gt; with &lt;code&gt;markdownlint&lt;/code&gt; and running both in a continuous integration build should ensure that documents are spelling correctly, grammatically correct, and written in a properly formatted and exclusive way.&lt;/p&gt;
&lt;p&gt;If you’re looking for a more accessible place to start or don’t need the grammar and clarity suggestions, then &lt;code&gt;mdspell&lt;/code&gt; and &lt;code&gt;markdownlint&lt;/code&gt; make a great combination.&lt;/p&gt;
&lt;p&gt;Once you have decided on what tools will work best for you, make sure you find a way to automate their usage. This blog uses &lt;code&gt;Vale&lt;/code&gt; and &lt;code&gt;markdownlint&lt;/code&gt; inside an &lt;a href=&quot;https://earthly.dev/&quot;&gt;Earthfile&lt;/a&gt; that is run every commit. This helps us prevent mistakes from getting into the blog.&lt;/p&gt;</content><author><name>Adam Gordon Bell</name></author><category term="+" /><category term="Tutorials" /><summary type="html">Many linting, code formatting, and static analysis tools exist for code. You can use eslint, gofmt, or many other static analysis tools, combined with a great continuous integration process, and ensure that your code stays in good shape. But what about markdown files and documentation? How do you ensure you aren’t committing spelling and grammar mistakes? How do you ensure your files are valid markdown and that the language you are using is clear and correct? You can do this and more with a documentation linter.</summary></entry><entry><title type="html">Creating and hosting your own rpm packages and yum repo</title><link href="https://earthly.dev/blog/creating-and-hosting-your-own-rpm-packages-and-yum-repo/" rel="alternate" type="text/html" title="Creating and hosting your own rpm packages and yum repo" /><published>2021-06-24T00:00:00-04:00</published><updated>2021-06-24T00:00:00-04:00</updated><id>https://earthly.dev/blog/creating-and-hosting-your-own-rpm-packages-and-yum-repo</id><content type="html" xml:base="https://earthly.dev/blog/creating-and-hosting-your-own-rpm-packages-and-yum-repo/">&lt;div class=&quot;narrow-code&quot;&gt;
&lt;p&gt;This tutorial is a follow up to &lt;a href=&quot;/blog/creating-and-hosting-your-own-deb-and-apt-repo&quot;&gt;creating and hosting your own deb and apt repo&lt;/a&gt;, but is written for creating rpm packages for redhat-based Linux distributions such as Fedora, CentOS, and Rocky Linux.&lt;/p&gt;
&lt;h2 id=&quot;prerequisites&quot;&gt;Prerequisites&lt;/h2&gt;
&lt;p&gt;This tutorial assumes you are using CentOS 8, and that the following packages are installed:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb1&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb1-1&quot;&gt;&lt;a href=&quot;#cb1-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;fu&quot;&gt;sudo&lt;/span&gt; yum install &lt;span class=&quot;at&quot;&gt;-y&lt;/span&gt; createrepo rpm-build rpm-sign wget gcc python3 yum-utils&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;notice--info&quot;&gt;
&lt;p&gt;If you don’t have a CentOS machine, you can still follow along using docker, just run&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb2&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb2-1&quot;&gt;&lt;a href=&quot;#cb2-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;docker&lt;/span&gt; run &lt;span class=&quot;at&quot;&gt;-ti&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;--rm&lt;/span&gt; centos:8 /bin/bash&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;to create a temporary CentOS environment to follow along with.&lt;/p&gt;
&lt;/div&gt;
&lt;h2 id=&quot;step-0-creating-a-simple-hello-world-program&quot;&gt;Step 0: Creating a Simple Hello World Program&lt;/h2&gt;
&lt;p&gt;We will be using the same basic hello world program that was used in the &lt;a href=&quot;/blog/creating-and-hosting-your-own-deb-and-apt-repo&quot;&gt;previous tutorial&lt;/a&gt;. In this tutorial, we will assume you have a binary located under &lt;code&gt;~/example/hello-world-program/hello-world&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;To quickly create a hello world binary using C, run:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb3&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb3-1&quot;&gt;&lt;a href=&quot;#cb3-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;fu&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;-p&lt;/span&gt; ~/example/hello-world-program&lt;/span&gt;
&lt;span id=&quot;cb3-2&quot;&gt;&lt;a href=&quot;#cb3-2&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;bu&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;#39;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb3-3&quot;&gt;&lt;a href=&quot;#cb3-3&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;int main() {&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb3-4&quot;&gt;&lt;a href=&quot;#cb3-4&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;    printf(&amp;quot;Hello World!\\n&amp;quot;);&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb3-5&quot;&gt;&lt;a href=&quot;#cb3-5&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;    return 0;&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb3-6&quot;&gt;&lt;a href=&quot;#cb3-6&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;}&amp;#39;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;gcc&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;-o&lt;/span&gt; ~/example/hello-world-program/hello-world &lt;span class=&quot;at&quot;&gt;-x&lt;/span&gt; c &lt;span class=&quot;at&quot;&gt;-&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This tutorial will only cover distributing binaries in rpm packages and will not cover creating source-based &lt;code&gt;rpm&lt;/code&gt;s. There’s other &lt;a href=&quot;https://www.thegeekstuff.com/2015/02/rpm-build-package-example/&quot;&gt;tutorials&lt;/a&gt; that cover creating spec files – the main goal of this tutorial is to document how to package a pre-compiled binary, and show how to generate your own self-hosted yum repository.&lt;/p&gt;
&lt;h2 id=&quot;step-1-creating-a-rpm-package&quot;&gt;Step 1: Creating a &lt;code&gt;rpm&lt;/code&gt; Package&lt;/h2&gt;
&lt;p&gt;Redhat-based Linux distributions use &lt;code&gt;.rpm&lt;/code&gt; packages to package and distribute programs.&lt;/p&gt;
&lt;p&gt;let’s start by making a directory to work out of:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb4&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb4-1&quot;&gt;&lt;a href=&quot;#cb4-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;fu&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;-p&lt;/span&gt; ~/example/rpm-work-dir&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Inside this directory, we will create a &lt;code&gt;spec&lt;/code&gt; file which contains package metadata such as the name, and summary of the package:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb5&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb5-1&quot;&gt;&lt;a href=&quot;#cb5-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;bu&quot;&gt;cd&lt;/span&gt; ~/example/rpm-work-dir&lt;/span&gt;
&lt;span id=&quot;cb5-2&quot;&gt;&lt;a href=&quot;#cb5-2&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;bu&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;Summary: A simple program that prints hello&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-3&quot;&gt;&lt;a href=&quot;#cb5-3&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;Name: hello-world&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-4&quot;&gt;&lt;a href=&quot;#cb5-4&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;Version: 1.0.0&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-5&quot;&gt;&lt;a href=&quot;#cb5-5&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;Release: 1&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-6&quot;&gt;&lt;a href=&quot;#cb5-6&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;URL: https://example.com&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-7&quot;&gt;&lt;a href=&quot;#cb5-7&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;Group: System&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-8&quot;&gt;&lt;a href=&quot;#cb5-8&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;License: example # https://fedoraproject.org/wiki/Licensing:Main?rd=Licensing#Software_License_List&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-9&quot;&gt;&lt;a href=&quot;#cb5-9&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;Packager: Example Team&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-10&quot;&gt;&lt;a href=&quot;#cb5-10&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;Requires: bash&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-11&quot;&gt;&lt;a href=&quot;#cb5-11&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;BuildRoot: ~/example/rpm-work-dir # this should be replaced with your working directory where the spec is saved&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-12&quot;&gt;&lt;a href=&quot;#cb5-12&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-13&quot;&gt;&lt;a href=&quot;#cb5-13&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;%description&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-14&quot;&gt;&lt;a href=&quot;#cb5-14&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;An example package containing a hello-world binary&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-15&quot;&gt;&lt;a href=&quot;#cb5-15&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-16&quot;&gt;&lt;a href=&quot;#cb5-16&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;%install&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-17&quot;&gt;&lt;a href=&quot;#cb5-17&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;mkdir -p %{buildroot}/usr/bin/&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-18&quot;&gt;&lt;a href=&quot;#cb5-18&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;cp ~/example/hello-world-program/hello-world %{buildroot}/usr/bin/hello-world&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-19&quot;&gt;&lt;a href=&quot;#cb5-19&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-20&quot;&gt;&lt;a href=&quot;#cb5-20&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;%files&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-21&quot;&gt;&lt;a href=&quot;#cb5-21&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;/usr/bin/hello-world&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-22&quot;&gt;&lt;a href=&quot;#cb5-22&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-23&quot;&gt;&lt;a href=&quot;#cb5-23&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;%changelog&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-24&quot;&gt;&lt;a href=&quot;#cb5-24&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;* Thu Jun 17 2021 alex &amp;lt;alex@earthly.dev&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-25&quot;&gt;&lt;a href=&quot;#cb5-25&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;- initial example&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb5-26&quot;&gt;&lt;a href=&quot;#cb5-26&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;&amp;gt;&lt;/span&gt; hello-world.spec&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next, we will use &lt;code&gt;rpmbuild&lt;/code&gt; to produce the &lt;code&gt;rpm&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb6&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb6-1&quot;&gt;&lt;a href=&quot;#cb6-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;rpmbuild&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;--target&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;x86_64&amp;quot;&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;-bb&lt;/span&gt; hello-world.spec&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will output an rpm under &lt;code&gt;/root/rpmbuild/RPMS/x86_64/hello-world-1.0.0-1.x86_64.rpm&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;We can inspect the contents with:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb7&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb7-1&quot;&gt;&lt;a href=&quot;#cb7-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;rpm&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;-qpivl&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;--changelog&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;--nomanifest&lt;/span&gt; /root/rpmbuild/RPMS/x86_64/hello-world-1.0.0-1.x86_64.rpm&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;which will output something similar to:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Name        : hello-world
Version     : 1.0.0
Release     : 1
Architecture: x86_64
Install Date: (not installed)
Group       : System
Size        : 10832
License     : example # https://fedoraproject.org/wiki/Licensing:Main?rd=Licensing#Software_License_List
Signature   : (none)
Source RPM  : hello-world-1.0.0-1.src.rpm
Build Date  : Fri 18 Jun 2021 09:21:39 PM UTC
Build Host  : 83f4a9d4e295
Relocations : (not relocatable)
Packager    : Example Team
URL         : https://example.com
Summary     : A simple program that prints hello
Description :
An example package containing a hello-world binary
* Thu Jun 17 2021 alex &amp;lt;alex@earthly.dev&amp;gt;
- initial example

-rwxr-xr-x    1 root    root                    10832 Jun 18 21:21 /usr/bin/hello-world
drwxr-xr-x    2 root    root                        0 Jun 18 21:21 /usr/lib/.build-id
drwxr-xr-x    2 root    root                        0 Jun 18 21:21 /usr/lib/.build-id/b9
lrwxrwxrwx    1 root    root                       31 Jun 18 21:21 /usr/lib/.build-id/b9/fea765874fcd0863841bc8f5d1aa1d65396751 -&amp;gt; ../../../../usr/bin/hello-world&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&quot;notice--info&quot;&gt;
&lt;p&gt;You can also inspect the content via &lt;code&gt;less /root/rpmbuild/RPMS/x86_64/hello-world-1.0.0-1.x86_64.rpm&lt;/code&gt;. Under the hood &lt;code&gt;less&lt;/code&gt; will invoke &lt;code&gt;/usr/bin/lesspipe.sh&lt;/code&gt;. You can perform a global regular expression print (grep) against the script to find the same command being used:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb9&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb9-1&quot;&gt;&lt;a href=&quot;#cb9-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;fu&quot;&gt;grep&lt;/span&gt; rpm /usr/bin/lesspipe.sh&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This should print the line where the same &lt;code&gt;rpm -qpivl ...&lt;/code&gt; command is being invoked:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb10&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb10-1&quot;&gt;&lt;a href=&quot;#cb10-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;*.rpm&lt;/span&gt;&lt;span class=&quot;er&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ex&quot;&gt;rpm&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;-qpivl&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;--changelog&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;--nomanifest&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;--&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;va&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;bu&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;$?&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;;;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Next, we can install our &lt;code&gt;rpm&lt;/code&gt; via:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install -y /root/rpmbuild/RPMS/x86_64/hello-world-1.0.0-1.x86_64.rpm&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then finally, we can test it was installed by running&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb12&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb12-1&quot;&gt;&lt;a href=&quot;#cb12-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;hello-world&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;which should print&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Hello World!&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;step-2-creating-a-yum-repository&quot;&gt;Step 2: Creating a &lt;code&gt;yum&lt;/code&gt; Repository&lt;/h2&gt;
&lt;p&gt;Next we’re going to create a yum repository which can be uploaded to a server to make it easier to share your package with other users.&lt;/p&gt;
&lt;p&gt;Our first step will be to import a pgp key which we will be using to sign our rpm packages and repo, to allow our users to verify the packages have not been tampered. Creating pgp keys was covered in our &lt;a href=&quot;/blog/creating-and-hosting-your-own-deb-and-apt-repo&quot;&gt;previous tutorial&lt;/a&gt;; in particular, we will assume you have public and private keys stored under &lt;code&gt;~/example/pgp-key.public&lt;/code&gt; and &lt;code&gt;~/example/pgp-key.private&lt;/code&gt; respectively.&lt;/p&gt;
&lt;p&gt;First let’s import our private key, so we have access to it for signing the repo:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb14&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb14-1&quot;&gt;&lt;a href=&quot;#cb14-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;gpg&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;--import&lt;/span&gt; ~/example/pgp-key.private&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This should output something similar to:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;gpg: directory &amp;#39;/root/.gnupg&amp;#39; created
gpg: keybox &amp;#39;/root/.gnupg/pubring.kbx&amp;#39; created
gpg: /root/.gnupg/trustdb.gpg: trustdb created
gpg: key E1933532750E9EEF: public key &amp;quot;example &amp;lt;example@example.com&amp;gt;&amp;quot; imported
gpg: key E1933532750E9EEF: secret key imported
gpg: Total number processed: 1
gpg:               imported: 1
gpg:       secret keys read: 1
gpg:   secret keys imported: 1&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We will then configure the rpm tools to use this key for signing our packages and repository:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb16&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb16-1&quot;&gt;&lt;a href=&quot;#cb16-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;bu&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;%_signature gpg&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb16-2&quot;&gt;&lt;a href=&quot;#cb16-2&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;%_gpg_name E1933532750E9EEF&amp;quot;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;&amp;gt;&lt;/span&gt; /root/.rpmmacros&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;notice--info&quot;&gt;
&lt;p&gt;Don’t forget to replace &lt;code&gt;E1933532750E9EEF&lt;/code&gt; with your key’s ID.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Let’s create a directory for our packages:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb17&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb17-1&quot;&gt;&lt;a href=&quot;#cb17-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;fu&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;-p&lt;/span&gt; ~/example/packages/&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then copy our rpm(s) into this directory:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb18&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb18-1&quot;&gt;&lt;a href=&quot;#cb18-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;fu&quot;&gt;cp&lt;/span&gt; /root/rpmbuild/RPMS/x86_64/hello-world-1.0.0-1.x86_64.rpm ~/example/packages/.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Since we didn’t configure a key in step 1, the rpm we created was not signed. We can add a signature to it by running:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb19&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb19-1&quot;&gt;&lt;a href=&quot;#cb19-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;rpm&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;--addsign&lt;/span&gt; ~/example/packages/&lt;span class=&quot;pp&quot;&gt;*&lt;/span&gt;.rpm&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;notice--info&quot;&gt;
&lt;p&gt;If you forgot to create &lt;code&gt;/root/.rpmmacros&lt;/code&gt;, or forgot to update the key ID, you might see an error such as &lt;code&gt;You must set &quot;%_gpg_name&quot; in your macro file&lt;/code&gt; or &lt;code&gt;gpg: signing failed: No secret key&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Once all the packages are signed, we will use &lt;code&gt;createrepo&lt;/code&gt; to create the repository:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb20&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb20-1&quot;&gt;&lt;a href=&quot;#cb20-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;bu&quot;&gt;cd&lt;/span&gt; ~/example/packages/&lt;/span&gt;
&lt;span id=&quot;cb20-2&quot;&gt;&lt;a href=&quot;#cb20-2&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;createrepo&lt;/span&gt; .&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, we will sign the repodata metadata by running:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb21&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb21-1&quot;&gt;&lt;a href=&quot;#cb21-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;gpg&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;--detach-sign&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;--armor&lt;/span&gt; repodata/repomd.xml&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;step-3-testing-the-repository&quot;&gt;Step 3: Testing the Repository&lt;/h2&gt;
&lt;p&gt;We are going to use python to temporarily create a web server to serve the contents of our repository:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb22&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb22-1&quot;&gt;&lt;a href=&quot;#cb22-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;bu&quot;&gt;cd&lt;/span&gt; ~/example&lt;/span&gt;
&lt;span id=&quot;cb22-2&quot;&gt;&lt;a href=&quot;#cb22-2&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;python3&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;-m&lt;/span&gt; http.server&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We will create a config for this server:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb23&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb23-1&quot;&gt;&lt;a href=&quot;#cb23-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;bu&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&amp;quot;[example-repo]&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb23-2&quot;&gt;&lt;a href=&quot;#cb23-2&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;name=Example Repo&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb23-3&quot;&gt;&lt;a href=&quot;#cb23-3&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;baseurl=http://127.0.0.1:8000/packages&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb23-4&quot;&gt;&lt;a href=&quot;#cb23-4&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;enabled=1&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb23-5&quot;&gt;&lt;a href=&quot;#cb23-5&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;gpgcheck=1&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb23-6&quot;&gt;&lt;a href=&quot;#cb23-6&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;st&quot;&gt;gpgkey=http://127.0.0.1:8000/pgp-key.public&amp;quot;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;&amp;gt;&lt;/span&gt; ~/example/example.repo&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next let’s configure our machine to use this new repository:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb24&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb24-1&quot;&gt;&lt;a href=&quot;#cb24-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;yum-config-manager&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;--add-repo&lt;/span&gt; http://127.0.0.1:8000/example.repo&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then we can install our package from the self-hosted repository with:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb25&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb25-1&quot;&gt;&lt;a href=&quot;#cb25-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;yum&lt;/span&gt; install &lt;span class=&quot;at&quot;&gt;-y&lt;/span&gt; hello-world&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;notice--info&quot;&gt;
&lt;p&gt;In this example, we were hosting the entire contents of &lt;code&gt;~/example&lt;/code&gt;, which may include your private key if you followed this tutorial completely and created it under &lt;code&gt;~/example/pgp-key.private&lt;/code&gt;. In practice, you would never serve a directory containing your private key.&lt;/p&gt;
&lt;/div&gt;
&lt;h2 id=&quot;appendix-a-a-complete-example-using-earthly&quot;&gt;Appendix A: A Complete Example using Earthly&lt;/h2&gt;
&lt;p&gt;A complete example has been created under &lt;a href=&quot;https://github.com/earthly/example-yum-repo/blob/main/Earthfile&quot;&gt;github.com/earthly/example-yum-repo/Earthfile&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This Earthfile contains all the above steps from this tutorial in a single location, which can be run directly in a single shot with:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb26&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb26-1&quot;&gt;&lt;a href=&quot;#cb26-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;earthly&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;-P&lt;/span&gt; github.com/earthly/example-yum-repo:main+test&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Alternatively, you can clone the repo and run &lt;code&gt;+test&lt;/code&gt; directly.&lt;/p&gt;
&lt;/div&gt;</content><author><name>Alex Couture-Beil</name></author><category term="Tutorials" /><summary type="html"></summary></entry><entry><title type="html">The 15-Minute Project</title><link href="https://earthly.dev/blog/15-minute-project/" rel="alternate" type="text/html" title="The 15-Minute Project" /><published>2021-06-22T00:00:00-04:00</published><updated>2021-06-22T00:00:00-04:00</updated><id>https://earthly.dev/blog/15-minute-project</id><content type="html" xml:base="https://earthly.dev/blog/15-minute-project/">&lt;p&gt;Like many others, 2020 encouraged me to find some new interests and hobbies to fill the time spent at home. At risk of sounding terribly boring, one of my newfound interests is that of city planning.&lt;/p&gt;
&lt;h2 id=&quot;what-is-city-planning&quot;&gt;What Is City Planning?&lt;/h2&gt;
&lt;p&gt;According to Wikipedia, city planning is &lt;a href=&quot;https://en.wikipedia.org/wiki/Urban_planning&quot;&gt;“…a technical and political process that is focused on the development and design of land use and the built environment…”&lt;/a&gt;. It includes basically everything, from air, and water to transportation and accessibility. Seems like a fairly broad and ill-specified discipline!&lt;/p&gt;
&lt;p&gt;In a typical American city or town, there is a city planning board that controls development and design. They meet regularly, and in public at their city hall. During 2020, many of these meetings became much more accessible and easy to observe through video calls. It was very interesting to watch how this big, broad concept of “city planning” was boiled down to actual, concrete actions that affected my day-to-day life.&lt;/p&gt;
&lt;h2 id=&quot;the-built-environment&quot;&gt;The Built Environment&lt;/h2&gt;
&lt;p&gt;One phrase I kept hearing over and over in planning meetings, in videos on YouTube&lt;a href=&quot;#fn1&quot; class=&quot;footnote-ref&quot; id=&quot;fnref1&quot; role=&quot;doc-noteref&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;, and other literature is that of the “built environment”. Tuns out that the phrase “built environment” is actually a well defined, distinct concept! It even has &lt;a href=&quot;https://en.wikipedia.org/wiki/Built_environment&quot;&gt;its own Wikipedia page, too&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;Simply put, the built environment is the stuff we’ve “built” around us; like roads, sidewalks, buildings, parks, and utilities. Feels tautological; but the built environment also encompasses &lt;em&gt;how&lt;/em&gt; these things affect us in our day-to-day life.&lt;/p&gt;
&lt;p&gt;The built environment is &lt;em&gt;why&lt;/em&gt; some areas are more desirable than others, and &lt;em&gt;how&lt;/em&gt; you can improve the lives of people within a city.&lt;/p&gt;
&lt;h2 id=&quot;building-a-built-environment&quot;&gt;Building A Built Environment&lt;/h2&gt;
&lt;p&gt;City planners are very concerned with designing the built environment within a city. To this end, they have many tools to guide development in a way that is (hopefully) beneficial and equitable to the community. Things like zoning, building codes, affordable housing, and traffic management can all influence the built environment in very consequential ways.&lt;/p&gt;
&lt;p&gt;But, a planning commission can’t design a built environment without a goal. Or, at least if they try, it won’t create the kind of built environment that people want to live in. Cities need targets and goals to help them design the places that people want to make their home.&lt;/p&gt;
&lt;p&gt;One model that I really like is that of the “&lt;a href=&quot;https://www.cnu.org/publicsquare/2021/02/08/defining-15-minute-city&quot;&gt;15 Minute City&lt;/a&gt;”. Originally conceived in 2016, it has since become a global movement; with many cities around the world adopting variations of the concept into their future planning goals. The idea behind a 15-minute city is that &lt;em&gt;most&lt;/em&gt; residents should be able to satisfy &lt;em&gt;most&lt;/em&gt; of their needs within a 15 minute bike ride from their home. This promotes a well-mixed, accessible, and human scale to target when designing a built environment.&lt;/p&gt;
&lt;h2 id=&quot;what-does-this-have-to-do-with-software-development&quot;&gt;What Does This Have To Do With Software Development?&lt;/h2&gt;
&lt;p&gt;At the risk of falling into the analogy trap, I think we can learn a lot by applying the “built environment” to our software projects. The code, tooling, and infrastructure we use constitutes the physical component, and the contributors working on the project are the citizens living within it.&lt;/p&gt;
&lt;p&gt;After all, &lt;a href=&quot;http://www.catb.org/~esr/writings/cathedral-bazaar/cathedral-bazaar/index.html#catbmain&quot;&gt;the cathedral &lt;em&gt;and&lt;/em&gt; the bazaar&lt;/a&gt; both have to exist &lt;em&gt;somewhere&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&quot;the-15-minute-project&quot;&gt;The 15-Minute Project?&lt;/h2&gt;
&lt;p&gt;Like cities may strive to become a “15-minute city”, I propose that software projects should strive to be “15-minute projects”. To become a 15-minute project, any blocked contributor should be able to find what they need to continue progressing within 15 minutes. Finding what you need could involve any piece of your project - the code, documentation, or the community.&lt;/p&gt;
&lt;p&gt;Yes, software is &lt;em&gt;hard&lt;/em&gt;. But so is city planning. Just as no city will achieve a “100% 15-minute city” goal, no software project will either. But, keeping this goal top of mind will do wonders for your project, and make it a desirable place for contributors to congregate.&lt;/p&gt;
&lt;h2 id=&quot;how-do-we-get-there&quot;&gt;How Do We Get There?&lt;/h2&gt;
&lt;p&gt;Before we begin, I am well aware that city planners are not perfect; and that cities quite often make poor decisions. For this analogy, we are considering the platonic ideal of a city and of the planners within it. Frictionless cities with perfectly spherical planners, if you will.&lt;/p&gt;
&lt;p&gt;From this, there are some lessons we can learn when applying city planning concepts to software projects. Below are a couple that I feel can really make a difference to the built environment within your project, and help inch closer to that 15-minute ideal.&lt;/p&gt;
&lt;h3 id=&quot;zoning&quot;&gt;Zoning&lt;/h3&gt;
&lt;p&gt;While we can &lt;a href=&quot;https://www.urban.org/debates/land-use-regulation-whats-it-worth-anyway&quot;&gt;argue about the necessity and efficacy of zoning&lt;/a&gt; within a city plan, having a general plan for your software project can make life a lot easier. If you have a general idea of what will go where, eventually, you can make intelligent decisions about what gets built &lt;em&gt;now&lt;/em&gt;. In a city, these plans are typically public, and can be viewed by everyone. So too should they be in a software project.&lt;/p&gt;
&lt;p&gt;Just like software, requirements for cities also tend to drift (just on a longer timescale). To this end, general plans should also be revisited and re-approved on a regular basis.&lt;/p&gt;
&lt;h3 id=&quot;building-codes&quot;&gt;Building Codes&lt;/h3&gt;
&lt;p&gt;Just like new construction within a city is governed by a &lt;a href=&quot;https://codes.iccsafe.org/content/IBC2021P1&quot;&gt;building code&lt;/a&gt;, so too should new contributions. Building codes typically get very verbose for safety reasons, but ours don’t need to be quite that strict (well, unless your code actually &lt;em&gt;is&lt;/em&gt; safety critical). Often, listing what tools and languages are to be used is sufficient. Most importantly, the building code for your software project should also be public and accessible.&lt;/p&gt;
&lt;p&gt;You can take this even further and codify the languages and tools. One approach I have seen is to use tools like &lt;code&gt;eslint&lt;/code&gt; on a Git commit hook to keep the code looking uniform, so things like formatting aren’t even a question. (This is why the author loves Go, for instance.) Earthly is a great tool to help you codify all parts of your pipeline.&lt;/p&gt;
&lt;h3 id=&quot;transportation&quot;&gt;Transportation&lt;/h3&gt;
&lt;p&gt;Getting people from place to place efficiently is a challenge that most cities face. Proper planning can help mitigate the inevitable traffic jam. Roads, public transit, and sidewalks are all part of the infrastructure that keeps a city moving.&lt;/p&gt;
&lt;p&gt;Likewise, our choices in communication tools affect the transportation of ideas and contributions within a project. Different tools are appropriate for different projects, because they have different citizens. But, if your project’s Slack channels and JIRA boards feel like rush hour in LA, then perhaps it is time to consider improvements.&lt;/p&gt;
&lt;h3 id=&quot;equity&quot;&gt;Equity&lt;/h3&gt;
&lt;p&gt;Cities and towns should be places for people from all walks of life, not just the “elites”. One common way to accomplish this is by enforcing affordable housing in new developments, and by making sure general improvements are evenly distributed across the city.&lt;/p&gt;
&lt;p&gt;Software projects, like cities, should try to improve the lives of all contributors, not just an insular group with the most control. Reserving “easy” issues for first time contributors, keeping documentation up to date, and making decisions in public can go a long way toward leveling the playing field for all contributors.&lt;/p&gt;
&lt;p&gt;A project that is known for being clear, fair, and equitable will end up with a more vibrant community that can carry it far further than it could otherwise travel on its own. A rising tide lifts all boats.&lt;/p&gt;
&lt;h3 id=&quot;taxes&quot;&gt;Taxes&lt;/h3&gt;
&lt;p&gt;Public infrastructure isn’t free. Cities levy taxes, typically in the form of property taxes, to pay for installation and ongoing maintenance. If the city is responsible, the taxes aren’t too onerous and the infrastructure isn’t too extravagant.&lt;/p&gt;
&lt;p&gt;In our software projects, there is also some form of “tax” to be paid for the shared infrastructure. The tax is paid in updating and maintaining shared resources, from build scripts, to CI/CD, to documentation.&lt;/p&gt;
&lt;p&gt;By keeping this shared infrastructure well maintained and right-sized for the project, you can also keep your takes low and the benefits high.&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;At this point, I think we’ve mined this analogy for almost all its worth. It really is fascinating how applicable some of these concepts are to two domains that initially appear entirely separate. For me, it has certainly opened my eyes and changed how I approach new and existing projects, and I hope it will for you too.&lt;/p&gt;
&lt;section class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot; role=&quot;doc-endnote&quot;&gt;&lt;p&gt;You would be surprised at how many &lt;a href=&quot;https://www.youtube.com/channel/UCGc8ZVCsrR3dAuhvUbkbToQ&quot;&gt;beautiful&lt;/a&gt; &lt;a href=&quot;https://www.youtube.com/channel/UC0intLFzLaudFG-xAvUEO-A&quot;&gt;channels&lt;/a&gt; &lt;a href=&quot;https://www.youtube.com/channel/UCqdUXv9yQiIhspWPYgp8_XA&quot;&gt;there&lt;/a&gt; &lt;a href=&quot;https://www.youtube.com/user/strongtowns&quot;&gt;are&lt;/a&gt; in this space!&lt;a href=&quot;#fnref1&quot; class=&quot;footnote-back&quot; role=&quot;doc-backlink&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content><author><name>Corey Larson</name></author><category term="Articles" /><summary type="html">Applying city planning to software development</summary></entry><entry><title type="html">Git Branching Strategies and The Greek Revival</title><link href="https://earthly.dev/blog/git-branching/" rel="alternate" type="text/html" title="Git Branching Strategies and The Greek Revival" /><published>2021-06-16T00:00:00-04:00</published><updated>2021-06-16T00:00:00-04:00</updated><id>https://earthly.dev/blog/git-branching</id><content type="html" xml:base="https://earthly.dev/blog/git-branching/">&lt;p&gt;Some modern development practices are easiest to understand from a historical perspective: things started a certain way, and then steps were added or removed as conditions changed. Git branching, for example, is like that.&lt;/p&gt;
&lt;p&gt;I’m going to explain various git branching strategies with a story. We will start with something straightforward and add complexity as we go. Eventually, we will end up back simple again.&lt;/p&gt;
&lt;p&gt;I hope that explaining things this way will give you a deeper understanding of when to use specific branching and merging strategies. So instead of telling you how to cherry-pick a bug fix into a hotfix branch using GitFlow work, I can describe the conditions that would lead to adopting that process. Once you understand the whys, the hows will be easier.&lt;/p&gt;
&lt;h2 id=&quot;ashelysoft-2006&quot;&gt;AshelySoft 2006&lt;/h2&gt;
&lt;p&gt;The year is 2006, and Ashley Protagonist starts a software business. She builds and sells an eCommerce solution she wrote in PHP. It’s just her building and selling it, but she uses a new source control solution called git to store her software. She starts with trunk-based development.&lt;/p&gt;
&lt;h2 id=&quot;trunk-based-development&quot;&gt;Trunk Based Development&lt;/h2&gt;
&lt;p&gt;Trunk-based development is working on the main, or trunk branch. Ashley commits her code right into the main branch on her local machine and, when she has complete a feature, she pushes her code to the source control server.&lt;/p&gt;
&lt;p&gt;Customers pay for her software, and she emails them a link to the current version as an archive file using &lt;a href=&quot;https://git-scm.com/docs/git-archive&quot;&gt;git archive&lt;/a&gt;. She is a PHP developer, so she whips up a simple PHP script that returns the git archive for the branch requested.&lt;/p&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/git-branching/email2-800-c3cecc459.webp 800w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/git-branching/email2-800-2d6f208ff.png 800w&quot; type=&quot;image/png&quot;&gt;&lt;img src=&quot;/blog/generated/assets/images/git-branching/email2-800-2d6f208ff.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;figcaption&gt;
Simple Release Distribution
&lt;/figcaption&gt;
&lt;p&gt;Her customers then install her software on their web servers, where they use it to run their eCommerce businesses.&lt;/p&gt;
&lt;section id=&quot;mainline-development&quot; class=&quot;notice--info&quot;&gt;
&lt;h2&gt;MainLine Development&lt;/h2&gt;
&lt;h3 id=&quot;ℹ️-fun-fact-trunk-vs.-main&quot;&gt;ℹ️ Fun Fact: Trunk VS. Main&lt;/h3&gt;
&lt;p&gt;If Ashley had chosen subversion or CVS, which were more prevalent in 2006, she would have called her branch &lt;code&gt;trunk&lt;/code&gt; because every branch is branched off the trunk like a real-world tree. This is where the term trunk-based development comes from. However, Ashley uses &lt;code&gt;main&lt;/code&gt;, so she may prefer the term mainline development. It’s the same thing, just a different name.&lt;/p&gt;
&lt;/section&gt;
&lt;h2 id=&quot;release-branches&quot;&gt;Release Branches&lt;/h2&gt;
&lt;p&gt;Ashley’s business succeeds. She acquires many more customers and hires more developers and a customer-support person. Support becomes problematic, though, as some customers are very slow to upgrade, and it’s unclear what version any given customer is on. Additionally, customers can’t keep up with the latest version when every commit is a new version, and there are no version numbers.&lt;/p&gt;
&lt;p&gt;So she decides to batch up the changes into monthly releases and create a new release branch for each revision. Of course, she could use tags for these releases, but branches and tags are pretty similar, and she already has her release script in place.&lt;/p&gt;
&lt;p&gt;Now her support people can ask customers what version they are on. If it’s more than two releases back, they ask them to upgrade. That is, AshelySoft only supports the current release and the two previous versions.&lt;/p&gt;
&lt;section id=&quot;cutting-a-release&quot; class=&quot;notice--info&quot;&gt;
&lt;h2&gt;Cutting a Release&lt;/h2&gt;
&lt;p&gt;There was a time before modern source control when creating a release branch was an expensive process that had to be planned. “Cutting a Release” was the name for this process, which involved locking down the source and starting the lengthy process of ‘cutting a release branch off the trunk’. People still use the phrase today.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“Well, the performance was so bad that when they wanted to cut a branch, they would announce it ahead of time. They would schedule the branching because you didn’t want anybody else committing while you were branching, because that would totally screw things up. Right? And I said,”Okay, Friday at 2:00 pm., we’re going to cut the branch.&quot; Then all activity would stop, access to the server would be cut off.&quot;&lt;/p&gt;
&lt;p&gt;And it would take 45 minutes to cut this branch. And then you’d say, “Okay, we’ve opened up the branch. Everybody can start working again.”&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://corecursive.com/software-that-doesnt-suck-with-jim-blandy/&quot;&gt;Jim Blandy&lt;/a&gt; creator of Subversion&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/section&gt;
&lt;h2 id=&quot;hot-fixes-and-the-multiverse&quot;&gt;Hot Fixes and the Multiverse&lt;/h2&gt;
&lt;p&gt;This is all working great. Ashley starts scaling the development team, and they start shipping more features. Unfortunately, while each monthly release now contains more cool new features, more regressions and bugs start slipping into the releases as well.&lt;/p&gt;
&lt;p&gt;Some customers respond to this by not upgrading right away. If they are well-served by the current product, they can stay two releases back and get active support while giving the latest release time to stabilize. Bugs do show up in the old versions, though, and this is where things get interesting.&lt;/p&gt;
&lt;p&gt;Up until now, time, as viewed by AshelySoft’s source control, moves forward in a single line. There is one &lt;code&gt;main&lt;/code&gt; branch that represents one linear release timeline. But now, when bugs are found, they need to be addressed in multiple versions of the product. And you can’t simply ask people to upgrade because they are still on a supported version, and they are correctly worried about the quality of the latest release. They want the version they have plus the bug fixes, with no new development.&lt;/p&gt;
&lt;p&gt;You are now in the hot fixing multiverse. AshelySoft has to fix bugs in the latest version and all other active versions. Each release is a separate timeline where active development ceased at the release date, but bugs continued to be fixed.&lt;/p&gt;
&lt;p&gt;If you’ve seen any time travel movies, you probably realize that this can get complex. What if a bug fix to back release introduces a bug of its own? Thankfully AshelySoft is only supporting two active versions back and only supporting them for a couple of months. Suppose they were supporting back versions for several years. In that case, they might find themselves spending more and more time maintaining all these versions, and the various versions would slowly drift away from each other.&lt;/p&gt;
&lt;p&gt;Nevertheless, release branches are an enormous help for AshelySoft. They help customers stay on a version that works for them, while AshelySoft can still push new features. However, it does increase the amount of effort that fixing bugs requires, and dealing with that will lead to AshelySoft’s next innovation.&lt;/p&gt;
&lt;h2 id=&quot;the-develop-branch&quot;&gt;The &lt;code&gt;develop&lt;/code&gt; Branch&lt;/h2&gt;
&lt;p&gt;The cost of shipping bugs has now increased for AshelySoft. In the worse case, a bug isn’t discovered until it’s in all active versions of the software and the code between versions has changed enough that the fix is slightly different in each version, tripling the bug fix cost.&lt;/p&gt;
&lt;p&gt;Fortunately, a solution for this does exist: Continuing with our time travel/multiverse analogy, we need to travel back in time and stop the bug before our releases branches off the main timeline. Unfortunately, AshelySoft does not have access to literal time travel machines, but Ashley has a more straightforward idea: Catch the bugs before they are released.&lt;/p&gt;
&lt;h2 id=&quot;gitflow-to-the-rescue&quot;&gt;GitFlow to the Rescue&lt;/h2&gt;
&lt;p&gt;A popular branching method called &lt;a href=&quot;https://nvie.com/posts/a-successful-git-branching-model/&quot;&gt;GitFlow&lt;/a&gt; has excellent suggestions for achieving this: you create a &lt;code&gt;develop&lt;/code&gt; branch. So now all new work goes into &lt;code&gt;develop,&lt;/code&gt; and instead of 4 weeks of development in each release, you spend the last week stabilizing &lt;code&gt;develop&lt;/code&gt;. You make sure &lt;code&gt;develop&lt;/code&gt; has no bugs as best you can, and when it seems stable, you merge it into main and then cut a release branch off main.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“We consider origin/develop to be the main branch where the source code of HEAD always reflects a state with the latest delivered development changes for the next release. Some would call this the”integration branch“. This is where any automatic nightly builds are built from.”&lt;/p&gt;
&lt;p&gt;“When the source code in the develop branch reaches a stable point and is ready to be released, all of the changes should be merged back into master somehow and then tagged with a release number.”&lt;/p&gt;
&lt;p&gt;GitFlow Explanation&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This whole process adds more overhead to the branching and release process, but it’s a fixed cost overhead, and it saves a lot of HotFixing bugs on release branches. AshelySoft, following the git-flow model, also adds a &lt;a href=&quot;/blog/continuous-integration&quot;&gt;continuous integration&lt;/a&gt; service. When new code shows up in &lt;code&gt;develop&lt;/code&gt;, &lt;a href=&quot;/blog/unit-vs-integration&quot;&gt;automated tests&lt;/a&gt; are run.&lt;/p&gt;
&lt;p&gt;This setup, git-flow and CI on develop branch, with release branches and hot fixing serves AshelySoft for several years. However, it is a complicated process. Thankfully, from here on out, AshelySoft’s process will only get simpler. The first thing that helps to simplify things is &lt;code&gt;The Cloud&lt;/code&gt;™️.&lt;/p&gt;
&lt;h2 id=&quot;the-cloud&quot;&gt;The Cloud&lt;/h2&gt;
&lt;p&gt;AshelySoft customers want to run an eCommerce store. However, they don’t want to run a web server. After repeatedly getting this feedback, Ashley shifts the company to be a Software-As-A-Service (SAAS) company. It takes some extensive work, but AshelySoft eCommerce becomes a multi-tenant eCommerce platform. No more &lt;code&gt;git archive&lt;/code&gt; releases. Now the release process is deploying the latest version of the main branch onto the production server.&lt;/p&gt;
&lt;p&gt;There are downsides to this SAAS model. AshelySoft now owns the uptime of all their customers, and this is eCommerce, so real money is lost when things go down. But, the customers are willing to pay more for AshelySoft to worry about these problems. They no longer have to support multi releases at a time - no more hot fixing bugs back into old versions, no more multiverse of drifting branches to update, and no more release branches. To make this work, AshelySoft works off a simple rule: &lt;code&gt;main&lt;/code&gt; must be releasable. Before anyone can merge &lt;code&gt;develop&lt;/code&gt; into &lt;code&gt;main&lt;/code&gt; they must make sure the continuous integration build is passing, and if they find problems that the CI process missed, they do their best to make sure CI will catch it in the future.&lt;/p&gt;
&lt;h2 id=&quot;github-flow&quot;&gt;GitHub Flow&lt;/h2&gt;
&lt;p&gt;Around this time, GitHub private repositories appear, and AshelySoft moves from their own git hosting to GitHub and starts following a Pull Request process. Instead of pushing code straight into &lt;code&gt;develop&lt;/code&gt; and then ensuring they didn’t break the build, developers now create pull-requests. Other team members review the pull-requests, and the continuous integration service runs its suite of tests right on the PR. As a result, the speed of getting code into &lt;code&gt;develop&lt;/code&gt; has decreased, but with each PR being manually reviewed and automatically tested, the quality of code that makes it into the &lt;code&gt;develop&lt;/code&gt; branch is way up.&lt;/p&gt;
&lt;h2 id=&quot;death-to-develop&quot;&gt;Death to &lt;code&gt;develop&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;With the quality of &lt;code&gt;develop&lt;/code&gt; now increased, AshelySoft can increase its release velocity. They even adopt a continuous deployment model where a merge into &lt;code&gt;main&lt;/code&gt; causes the software to be automatically deployed. From there, they move to a &lt;a href=&quot;/blog/deployment-strategies/#canary-deployment&quot;&gt;Canary deployment model&lt;/a&gt; where a new release is tested on a small portion of web traffic before it’s fully deployed. Once a PR is merged, Ashley just has to merge &lt;code&gt;develop&lt;/code&gt; into &lt;code&gt;main&lt;/code&gt; to perform a release.&lt;/p&gt;
&lt;p&gt;But what is the point of having &lt;code&gt;develop&lt;/code&gt; and merging it into &lt;code&gt;main&lt;/code&gt;? It was introduced to prevent the release of bugs by giving the software time to ‘integrate’, but AshelySoft is doing all the integration as part of the PR process. So they drop the &lt;code&gt;develop&lt;/code&gt; branch.&lt;/p&gt;
&lt;p&gt;Ashley has come a long way but sometimes what is old is new again. She is now back to doing trunk-based or mainline development. Just like when she built the first version: features go into &lt;code&gt;main&lt;/code&gt;, and the HEAD of &lt;code&gt;main&lt;/code&gt; is constantly released.&lt;/p&gt;
&lt;h2 id=&quot;lessons-learned&quot;&gt;Lessons Learned&lt;/h2&gt;
&lt;p&gt;There is a lot about git merging strategies, continuous integration, and deployment that doesn’t seem to make sense without going through a long journey like Ashely’s.&lt;/p&gt;
&lt;p&gt;For instance, calling software that builds and tests code a continuous integration process only makes sense when you understand what non-continuous integration was. It was spending time manually testing the upcoming release for days or even weeks before feeling confident enough to release it.&lt;/p&gt;
&lt;p&gt;Ashely’s story is fictional, and history didn’t necessarily unfold this way for all or even most software shops, but I think it’s helpful to understand where we are coming from and how cloud and SAAS workflows influence branching models.&lt;/p&gt;
&lt;p&gt;Some software always had an extensive review process, and much software will never be cloud-based and will continue to deal with release branches and backporting fixes. But some software has moved to the cloud and yet hasn’t embraced the simplified workflows that cloud deployment can enable.&lt;/p&gt;
&lt;h2 id=&quot;appendix-develop-and-the-greek-revival-style&quot;&gt;Appendix: Develop and The Greek Revival Style&lt;/h2&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/git-branching/greek-columns-550-93c2aaf0b.webp 550w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/git-branching/greek-columns-550-9fd39c02f.jpg 550w&quot; type=&quot;image/jpeg&quot;&gt;&lt;img src=&quot;/blog/generated/assets/images/git-branching/greek-columns-550-9fd39c02f.jpg&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;The Parthenon was built in ancient Greece using columns of marble. These columns of marble held it up.&lt;/p&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/git-branching/greek-revival-800-bc37602f4.webp 800w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/git-branching/greek-revival-800-ce1d10ab6.jpg 800w&quot; type=&quot;image/jpeg&quot;&gt;&lt;img src=&quot;/blog/generated/assets/images/git-branching/greek-revival-800-ce1d10ab6.jpg&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;This is a greek-revival style house. These columns are not about function but form – they are unnecessary and were chosen for aesthetic purposes.&lt;/p&gt;
&lt;p&gt;If you don’t need to maintain and support multiple versions of your software and it only runs on your servers, then you might have a purely decorative &lt;code&gt;develop&lt;/code&gt; branch. You may be using a git branching model that is very effective for a software lifecycle that you yourself are not in fact practicing. Those might not be load-bearing functional columns – you might be copying the visual appearance of the ancients without understanding the purpose they had in mind.&lt;/p&gt;
&lt;p&gt;The creator of GitFlow offers similar thoughts:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Web apps are typically continuously delivered, not rolled back, and you don’t have to support multiple versions of the software running in the wild.&lt;/p&gt;
&lt;p&gt;If your team is doing continuous delivery of software, I would suggest to adopt a much simpler workflow (like GitHub flow) instead of trying to shoehorn git-flow into your team.&lt;/p&gt;
&lt;p&gt;GitFlow Creator Vincent Driessen&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The closer you can stay to trunk-based or mainline development, the less overhead you will have and the smaller the batches you’ll be able to release.&lt;/p&gt;</content><author><name>Adam Gordon Bell</name></author><category term="Tutorials" /><summary type="html">Some modern development practices are easiest to understand from a historical perspective: things started a certain way, and then steps were added or removed as conditions changed. Git branching, for example, is like that.</summary></entry><entry><title type="html">Incident Management Metrics and Key Performance Indicators</title><link href="https://earthly.dev/blog/incident-management-metrics/" rel="alternate" type="text/html" title="Incident Management Metrics and Key Performance Indicators" /><published>2021-06-11T00:00:00-04:00</published><updated>2021-06-11T00:00:00-04:00</updated><id>https://earthly.dev/blog/incident-management-metrics</id><content type="html" xml:base="https://earthly.dev/blog/incident-management-metrics/">&lt;!-- markdownlint-disable MD024 --&gt;
&lt;p&gt;In 2008, I got my first job at a software-as-a-service company. We built learning management software and ran it on servers in the small data center connected to our office.&lt;/p&gt;
&lt;p&gt;We released new software onto these production servers monthly and measured quality by counting bugs per release. We also had account managers who kept us informed of how many large clients seemed upset about the last release.&lt;/p&gt;
&lt;p&gt;Occasionally, when something went wrong, we would do a stability release and spend a month only fixing bugs. &lt;a href=&quot;/blog/unit-vs-integration&quot;&gt;Testing&lt;/a&gt; was not a part of our build process but a part of our team: every feature team had quality assurance people who tested each feature before it was released.&lt;/p&gt;
&lt;p&gt;This wasn’t that long ago, but cloud software development has matured a lot since this time. Incident management has become standard practice, and many great metrics and Key Performance Indicators (KPIs) exist for measuring release quality. Let’s review some of them.&lt;/p&gt;
&lt;h2 id=&quot;mean-time-between-failures-mtbf&quot;&gt;Mean Time Between Failures (MTBF)&lt;/h2&gt;
&lt;p&gt;When software is being released only once a month, on a fixed timeline, with extensive manual testing, counting the number of bugs might work. But once you start releasing many times per week or per day, this won’t work, and another way to measure software quality is required.&lt;/p&gt;
&lt;p&gt;Mean time between failures is a metric from the field of &lt;a href=&quot;/blog/achieving-repeatability&quot;&gt;reliability&lt;/a&gt; engineering. Calculating it is simple: it is time over the number of failures that occurred during that time. If in the last 30 days you have had two production incidents, then the mean time between failure is 15 days.&lt;/p&gt;
&lt;section id=&quot;calculating-mtbf&quot; class=&quot;notice--big--primary&quot;&gt;
&lt;h3&gt;Calculating MTBF&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th&gt;Incidents in last 30 days&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;#1&lt;/td&gt;
&lt;td&gt;Jan 3rd&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;#2&lt;/td&gt;
&lt;td&gt;Jan 25&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;dl&gt;
&lt;dt&gt;Mean Time Between Failures =&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;30 days / 2 Incidents = 15 days&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/section&gt;
&lt;h2 id=&quot;mean-time-to-recovery-mttr&quot;&gt;Mean Time to Recovery (MTTR)&lt;/h2&gt;
&lt;p&gt;Something funny happens when you start releasing more frequently. You may end up with a higher count of issues in production, but resolving them will happen much faster. If each change is released separately using a continuous delivery model, then recovering gets easier – often, all that is required is hitting a rollback button.&lt;/p&gt;
&lt;p&gt;If you are measuring MTBF, your software may be getting much better, but your numbers will be getting worse. Enter mean time to recovery. Mean time to recovery is just what it sounds like: you start a timer when the incident begins and stop it when production is healthy again - even a simple rollback counts. Average this number across incidents, and you have MTTR. You now have a metric that captures the health of your incidence response process.&lt;/p&gt;
&lt;section id=&quot;calculating-mean-time-to-recovery&quot; class=&quot;notice--big--primary&quot;&gt;
&lt;h3&gt;Calculating Mean Time to Recovery&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th&gt;Incident #1&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;Reported&lt;/td&gt;
&lt;td&gt;10:00 am.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;Recovered&lt;/td&gt;
&lt;td&gt;12:00 pm.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;Recovery Time&lt;/td&gt;
&lt;td&gt;2 Hours&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th&gt;Incident #2&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;Reported&lt;/td&gt;
&lt;td&gt;10:00 am.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;Recovered&lt;/td&gt;
&lt;td&gt;2 days later at 10:00 am.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;Recovery Time&lt;/td&gt;
&lt;td&gt;48 Hours&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;dl&gt;
&lt;dt&gt;Mean Time To Recovery =&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;2 hour + 48 hours / 2 failures = 25 hours&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/section&gt;
&lt;h2 id=&quot;mean-time-to-resolve-mttre&quot;&gt;Mean Time to Resolve (MTTRe)&lt;/h2&gt;
&lt;div class=&quot;notice--info&quot;&gt;
&lt;p&gt;ℹ️ Acronyms Collision Alert&lt;/p&gt;
&lt;p&gt;Mean Time To Resolve, MTTRe, differs from Mean Time To Recover, MTTR, but some resources use MTTR for both. To avoid confusion, ensure you are using the correct terminology for your metric.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Rolling back to address an incident is a great idea: it’s often the quickest way to get things back in a good place. But there are other types of incidents. Imagine your application deadlocks every once in a while, and you have to restart it to unlock. You may have an excellent mean time to recovery, but you’ve never actually addressed the root cause. This is what MTTRe measures, not the time to get the service back up and running but to resolve the root cause and ensure the problem never happens again.&lt;/p&gt;
&lt;p&gt;The never-happens-again part is hard to achieve but vital. If you are responding quickly but never getting to the root cause, you will be living in a stressful world of constant fire fighting. However, if you are resolving the root cause of each incident, then quality will increase over time.&lt;/p&gt;
&lt;section id=&quot;calculating-mean-time-to-resolve&quot; class=&quot;notice--big--primary&quot;&gt;
&lt;h3&gt;Calculating Mean Time to Resolve&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th&gt;Incident #3&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;Reported&lt;/td&gt;
&lt;td&gt;day 1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;Addressed&lt;/td&gt;
&lt;td&gt;day 1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;Root Cause Analysis&lt;/td&gt;
&lt;td&gt;day 2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;Root Cause Addressed&lt;/td&gt;
&lt;td&gt;day 31&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;&lt;strong&gt;Resolve Time&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;30 days&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th&gt;Incident #4&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;Reported&lt;/td&gt;
&lt;td&gt;day 1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;Addressed&lt;/td&gt;
&lt;td&gt;day 1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;Root Cause Analysis&lt;/td&gt;
&lt;td&gt;day 2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;Root Cause Addressed&lt;/td&gt;
&lt;td&gt;day 11&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;&lt;strong&gt;Resolve Time&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;10 days&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;dl&gt;
&lt;dt&gt;Mean Time To Resolve =&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;30 days + 10 days / 2 incidents = 20 days&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/section&gt;
&lt;h2 id=&quot;mean-time-to-acknowledge-mtta&quot;&gt;Mean Time to Acknowledge (MTTA)&lt;/h2&gt;
&lt;p&gt;An essential part of good incident management is an on-call rotation. You need someone around to respond to incidents when they occur. Our previous metrics would be unable to differentiate between an incident that took 3 hours to recover from and one that was recoverable in 5 minutes but took two hours and 55 minutes to be acknowledged.&lt;/p&gt;
&lt;p&gt;MTTA highlights this difference. It is a metric for measuring the responsiveness of the on-call person to any alerts.&lt;/p&gt;
&lt;section id=&quot;calculating-mean-time-to-acknowledge&quot; class=&quot;notice--big--primary&quot;&gt;
&lt;h3&gt;️Calculating Mean Time to Acknowledge&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th&gt;Incident #5&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;Reported&lt;/td&gt;
&lt;td&gt;10 am&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;Acknowledged&lt;/td&gt;
&lt;td&gt;10: 05 am&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;Recovered&lt;/td&gt;
&lt;td&gt;12:00 pm&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;&lt;strong&gt;Acknowledge Time&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;5 minutes&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&quot;header&quot;&gt;
&lt;th&gt;Incident #6&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;Reported&lt;/td&gt;
&lt;td&gt;10 am&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;Acknowledged&lt;/td&gt;
&lt;td&gt;11: 55 am&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;odd&quot;&gt;
&lt;td&gt;Recovered&lt;/td&gt;
&lt;td&gt;12:00 pm&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
&lt;td&gt;&lt;strong&gt;Acknowledge Time&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;115 minutes&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;dl&gt;
&lt;dt&gt;Mean Time To Acknowledge =&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;5 minutes + 115 minutes / 2 incidents = 60 minutes&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/section&gt;
&lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt;
&lt;p&gt;There are many ways to measure the quality of your software as a service product. MTBF, MTTR, MTTRe, and MTTA can each offer a different lens for viewing your software release life cycle. As you improve your Software Development Life Cycle, find ways to collect aggregate metrics like these and choose one or two to target for improvement.&lt;/p&gt;
&lt;p&gt;Invest in improving these metrics, and you’ll make up for it in time saved fighting fires. Also, focusing on aggregate metrics can be an effective way to move the discussion from blame about specific incidents to a higher-level debate around changing the process to better support the company’s goals.&lt;/p&gt;
&lt;p&gt;If your build pipeline is taking more than 15 minutes and therefore negatively affecting your metrics, then take a look at Earthly’s &lt;a href=&quot;http://earthly.dev/&quot;&gt;free and open build tool&lt;/a&gt;.&lt;/p&gt;</content><author><name>Adam Gordon Bell</name></author><category term="Tutorial" /><summary type="html">In 2008, I got my first job at a software-as-a-service company. We built learning management software and ran it on servers in the small data center connected to our office.</summary></entry><entry><title type="html">Deployment Strategies</title><link href="https://earthly.dev/blog/deployment-strategies/" rel="alternate" type="text/html" title="Deployment Strategies" /><published>2021-06-10T00:00:00-04:00</published><updated>2021-06-10T00:00:00-04:00</updated><id>https://earthly.dev/blog/deployment-strategies</id><content type="html" xml:base="https://earthly.dev/blog/deployment-strategies/">&lt;p&gt;There are many ways to deploy applications to a production server environment, and the terminology around deploy strategies is often confusing. In this short guide, I’ll review software deployment options starting from the most basic and straightforward and moving towards the more complex.&lt;/p&gt;
&lt;h2 id=&quot;recreate-deployment-strategy&quot;&gt;Recreate Deployment Strategy&lt;/h2&gt;
&lt;p&gt;This is the most straightforward deployment strategy. It’s been the default strategy in enterprise IT for a long time and works well when updates are very infrequent and maintenance windows plentiful. You stop the old service and then start up the new service. During the teardown and spin-up process, the service is down.&lt;/p&gt;
&lt;p&gt;In a software-as-a-service world, with frequent updates, this strategy can really only work with the use of queues and asynchronous messaging architectures. For example, when upgrading a service that sends email, the mail will queue in an outbox waiting for the upgraded version to start up.&lt;/p&gt;
&lt;section id=&quot;pros&quot; class=&quot;no_toc_section&quot;&gt;
&lt;h3&gt;Pros&lt;/h3&gt;
&lt;/section&gt;
&lt;ul&gt;
&lt;li&gt;Easy&lt;/li&gt;
&lt;li&gt;Works excellent with queues and asynchronous message buffers&lt;/li&gt;
&lt;li&gt;Never need to run more than one version of the service in parallel&lt;/li&gt;
&lt;/ul&gt;
&lt;section id=&quot;cons&quot; class=&quot;no_toc_section&quot;&gt;
&lt;h3&gt;Cons&lt;/h3&gt;
&lt;/section&gt;
&lt;ul&gt;
&lt;li&gt;Downtime to upgrade&lt;/li&gt;
&lt;li&gt;Downtime to rollback&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;rolling-update-deployment-strategy&quot;&gt;Rolling Update Deployment Strategy&lt;/h2&gt;
&lt;p&gt;The recreate strategy above assumes you only have one instance of your service running at a time. But if you have several with a load balancer in front, you can improve the downtime story with a rolling update strategy. You start an instance of the new version, and once it’s up, gracefully terminate one instance of the old version. Then continue this pattern until only new versions of the service are running. This strategy is ubiquitous in &lt;a href=&quot;/blog/building-on-kubernetes-ingress&quot;&gt;Kubernetes&lt;/a&gt; and other containerized production environments.&lt;/p&gt;
&lt;section id=&quot;pros-1&quot; class=&quot;no_toc_section&quot;&gt;
&lt;h3&gt;Pros&lt;/h3&gt;
&lt;/section&gt;
&lt;ul&gt;
&lt;li&gt;Easy on Kubernetes&lt;/li&gt;
&lt;li&gt;No Downtime on upgrade&lt;/li&gt;
&lt;/ul&gt;
&lt;section id=&quot;cons-1&quot; class=&quot;no_toc_section&quot;&gt;
&lt;h3&gt;Cons&lt;/h3&gt;
&lt;/section&gt;
&lt;ul&gt;
&lt;li&gt;Multiple versions of same service active during the overlap&lt;/li&gt;
&lt;li&gt;No warm rollback services&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;blue-green-deployment&quot;&gt;Blue-Green Deployment&lt;/h2&gt;
&lt;p&gt;A blue-green deployment requires a bit more resources: you need two identical production environments and a load balancer. One of these environments always receives 100% of the traffic while the other version sits idle. Updates are deployed to inactive version, and once it is successfully upgraded, traffic is switched over to it. These two environments are named blue and green, respectively, and traffic alternates back and forth from green to blue and then blue to green and so on. This means that the previously deployed version is always running on the idle environment, which simplifies rollbacks.&lt;/p&gt;
&lt;section id=&quot;pros-2&quot; class=&quot;no_toc_section&quot;&gt;
&lt;h3&gt;Pros&lt;/h3&gt;
&lt;/section&gt;
&lt;ul&gt;
&lt;li&gt;Eliminates upgrade downtime&lt;/li&gt;
&lt;li&gt;Very quick rollbacks&lt;/li&gt;
&lt;/ul&gt;
&lt;section id=&quot;cons-2&quot; class=&quot;no_toc_section&quot;&gt;
&lt;h3&gt;Cons:&lt;/h3&gt;
&lt;/section&gt;
&lt;ul&gt;
&lt;li&gt;More Resources&lt;/li&gt;
&lt;li&gt;More Deployment complexity&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;canary-deployment&quot;&gt;Canary Deployment&lt;/h2&gt;
&lt;p&gt;A canary deployment strategy looks a lot like a blue-green deployment – a new version of the service starts up parallel to the existing version – with a slight improvement made: instead of switching all traffic over to the new version, only a percentage of traffic is initially sent. This traffic is the canary in the coal mine. Canaries were used in mining to measure air quality. The miners would bring a canary with them as they traveled down into the mine. If there was an air quality problem, the canary would die before the miners and act as an early warning signal.&lt;/p&gt;
&lt;p&gt;In the same way, a canary deployment does not prevent downtime, but limits its impact by giving an early warning. It limits access to the new version to a subset of users. If &lt;a href=&quot;/blog/incident-management-metrics&quot;&gt;metrics&lt;/a&gt; indicate that the new service is not responding well to this fraction of requests, then the roll-out can be aborted, lessening its impact. If everything looks OK, request volume is slowly ramped up until its being entirely served by the new version.&lt;/p&gt;
&lt;p&gt;Depending on how the canary traffic is chosen, a downside to this approach is that a specific subset of users may experience most of the production issues.&lt;/p&gt;
&lt;section id=&quot;pros-3&quot; class=&quot;no_toc_section&quot;&gt;
&lt;h3&gt;Pros&lt;/h3&gt;
&lt;/section&gt;
&lt;ul&gt;
&lt;li&gt;Catch Problems Early&lt;/li&gt;
&lt;/ul&gt;
&lt;section id=&quot;cons-3&quot; class=&quot;no_toc_section&quot;&gt;
&lt;h3&gt;Cons&lt;/h3&gt;
&lt;/section&gt;
&lt;ul&gt;
&lt;li&gt;Deployment complexity&lt;/li&gt;
&lt;li&gt;Canary users bear the brunt of production issues&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;shadow-deployment&quot;&gt;Shadow Deployment&lt;/h2&gt;
&lt;p&gt;If the problems a canary deployment finds can genuinely be found with metrics alone, and if the cost of incidents is very high, then a shadow or mirrored deployment is worth considering.&lt;/p&gt;
&lt;p&gt;In a shadow deployment, the new version of the service is started, and all traffic is mirrored by the load balancer. That is, requests are sent to the current version and the new version, but all responses come only from the existing stable version. In this way, you can monitor the latest version under load without any possibility of customer impact. This strategy is sometimes called a mirrored canary deployment.&lt;/p&gt;
&lt;p&gt;The cost of this approach is in the implementation. A service mesh like Istio is probably needed to perform the actual request mirroring, and it gets more complex from there. If a new version of a user service backed by a relational database was shadow deployed, all users might be created twice, leading to untold ramifications. To embrace a shadow or mirrored deployment strategy, you have to think about the implications of duplicated requests, and any non-idempotent actions on downstream services may need to be mocked.&lt;/p&gt;
&lt;section id=&quot;pros-4&quot; class=&quot;no_toc_section&quot;&gt;
&lt;h3&gt;Pros&lt;/h3&gt;
&lt;/section&gt;
&lt;ul&gt;
&lt;li&gt;Catch production problems without custom impact&lt;/li&gt;
&lt;/ul&gt;
&lt;section id=&quot;cons-4&quot; class=&quot;no_toc_section&quot;&gt;
&lt;h3&gt;Cons&lt;/h3&gt;
&lt;/section&gt;
&lt;ul&gt;
&lt;li&gt;Deployment complexity&lt;/li&gt;
&lt;li&gt;Architectural complexity&lt;/li&gt;
&lt;/ul&gt;
&lt;section id=&quot;summary&quot; class=&quot;no_toc_section&quot;&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;/section&gt;
&lt;p&gt;There are many deployment methods, from the very simple to the very complex. The deployment strategy the works best for any given situation depends on many factors. When choosing a deployment strategy balancing the cost of downtime versus the cost of deployment complexity is essential.&lt;/p&gt;
&lt;p&gt;If there are other deployment strategies or other continuous deployment terms you would like to see covered, please reach out to us on &lt;a href=&quot;https://twitter.com/earthlytech&quot;&gt;Twitter&lt;/a&gt; or via &lt;a href=&quot;adam@earthly.dev&quot;&gt;email&lt;/a&gt;.&lt;/p&gt;</content><author><name>Adam Gordon Bell</name></author><category term="Tutorial" /><summary type="html">There are many ways to deploy applications to a production server environment, and the terminology around deploy strategies is often confusing. In this short guide, I’ll review software deployment options starting from the most basic and straightforward and moving towards the more complex.</summary></entry><entry><title type="html">Don’t Feed the Thought Leaders</title><link href="https://earthly.dev/blog/thought-leaders/" rel="alternate" type="text/html" title="Don’t Feed the Thought Leaders" /><published>2021-06-09T00:00:00-04:00</published><updated>2021-06-09T00:00:00-04:00</updated><id>https://earthly.dev/blog/thought-leaders</id><content type="html" xml:base="https://earthly.dev/blog/thought-leaders/">&lt;p&gt;Here is a somewhat fictionalized personal story. I’ve changed the names of the people and the technology used.&lt;/p&gt;
&lt;h2 id=&quot;raising-objections&quot;&gt;Raising Objections&lt;/h2&gt;
&lt;p&gt;I was a new engineering manager whose team was starting a new small but ambitious project at a SAAS company. The company had several hundred developers, and the project was approved. A design document and development plan existed, a working prototype had been created, and several talented people were executing the plan. All that was left to do, from my perspective, was to ‘reach alignment.’&lt;/p&gt;
&lt;p&gt;I’m not sure if reaching alignment is a universal term that I was previously unfamiliar with or if it’s company-specific. But for this project, it worked like this: The project was approved, but there were all kinds of people vaguely horizontal to me in the organization who could ‘raise objections’ about it.&lt;/p&gt;
&lt;p&gt;Raising objections is a process where you tell someone above me, my boss or my boss’s boss, or so on, that you have concerns about the project’s success. An easy way to report concerns can be an excellent idea. If the SRE manager heard we were using bongoDB and had dealt with bongoDB data loss in the past, then there is no better time to speak than at the beginning of the project. And because the head of engineering doesn’t want to spend time mediating discussions about database preferences, or whatever the latest concerns are, part of my job was to make sure there were no objections to be raised.&lt;/p&gt;
&lt;h2 id=&quot;seeking-alignment&quot;&gt;Seeking Alignment&lt;/h2&gt;
&lt;p&gt;Preventing the raising of objections was called ‘reaching alignment.’ I find the people who might have concerns or advice, get feedback from them, and work with the developers on the team to adjust the plan based on that. It ends up feeling a lot like the office episode where Andy and Kevin must meet with the heads of every company in the office park to reach a decision about the parking spaces.&lt;/p&gt;
&lt;div class=&quot;wide&quot;&gt;
&lt;p&gt;&lt;img width=&quot;1200px&quot; src=&quot;/blog/generated/assets/images/thought-leaders/4-families-800-6e897ae5d.png&quot; srcset=&quot;/blog/generated/assets/images/thought-leaders/4-families-400-6e897ae5d.png 400w, /blog/generated/assets/images/thought-leaders/4-families-600-6e897ae5d.png 600w, /blog/generated/assets/images/thought-leaders/4-families-800-6e897ae5d.png 800w, /blog/generated/assets/images/thought-leaders/4-families-1000-6e897ae5d.png 1000w&quot;&gt;&lt;/p&gt;
&lt;figcaption&gt;
Everybody has advice about how to build your project
&lt;/figcaption&gt;
&lt;/div&gt;
&lt;p&gt;At its worse, the conversations tended to go something like this:&lt;/p&gt;
&lt;h3 id=&quot;the-quality-person-meeting&quot;&gt;The Quality Person Meeting&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Adam:&lt;/strong&gt; You’ve had a chance to read the design doc. What are your thoughts?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Quality Person:&lt;/strong&gt; There is nothing in here about unit-test coverage, and taking a look at your other services, they are below the 80% level we set as an H2 goal. Can you add a unit-testing strategy to the plan and set a specific coverage goal?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;the-data-person-meeting&quot;&gt;The Data Person Meeting&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Adam:&lt;/strong&gt; You’ve had a chance to read the design doc. What are your thoughts?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Data Person:&lt;/strong&gt; We are currently migrating all data in Important-Project-A from springy search to beetleDB, and it is a multi-year project. All new projects should follow this, so the effort doesn’t need to be repeated.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Adam:&lt;/strong&gt; We weren’t going to use springy search, just a relational database. So I think we should be good.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Data Person:&lt;/strong&gt; BeetleDB is relational database equivalent, so I would recommend using that so that you can scale.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;the-micro-services-person&quot;&gt;The Micro-Services Person&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Adam:&lt;/strong&gt; You’ve had a chance to read the design doc. What are your thoughts?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Micro-Services Person:&lt;/strong&gt; I would recommend separating the read-side from the write-side. Put them in separate services so that they can be scaled independently. That was our number one secret to scaling when I was at warble: the finer grain the services, the easier they are to scale.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I think you get the idea. If we adapt to all the feedback, then we will avoid the pitfalls of the recent past. But also, the scope of the project will drastically grow, and the project will likely never get completed. It’s like a &lt;a href=&quot;https://en.wikipedia.org/wiki/Second-system_effect&quot;&gt;second-system effect&lt;/a&gt; but brought forward in time.&lt;/p&gt;
&lt;h2 id=&quot;the-solution&quot;&gt;The Solution&lt;/h2&gt;
&lt;div class=&quot;align-right&quot;&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/thought-leaders/hearnoevil-320-19bb12389.webp 320w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/thought-leaders/hearnoevil-320-bd3ff66f7.png 320w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;200px&quot; src=&quot;/blog/generated/assets/images/thought-leaders/hearnoevil-320-bd3ff66f7.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;figcaption&gt;
The Solution
&lt;/figcaption&gt;
&lt;/div&gt;
&lt;p&gt;Thankfully, not all the advice I received was bad. One person, in particular, asked very pointed questions about the problems be solved and identified some potential blind spots in our plan. They also offered a great tip for dealing with advice that didn’t seem relevant to the project’s success: Create an extended product roadmap and put those items at least a year off into the future “and as long as they don’t seem relevant, you can just keep pushing them into the future.” Perversely this plan made everyone happy – everyone’s feedback is on the roadmap, and now it’s all just a question of priorities.&lt;/p&gt;
&lt;p&gt;With that bureaucratic judo trick, the project got off the ground. But the experience stayed with me. What made some advice valuable and some advice problematic? Was there some general principle behind expert advice?&lt;/p&gt;
&lt;h2 id=&quot;contingent-advice&quot;&gt;Contingent Advice&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;“All bad advice is alike, but all good advice is unique to the problem at hand.” ― Leo Tolstoy misquoted&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The problem with all the bad advice was that it was unrelated to the problem we were trying to solve. The unit-testing person will always be advocating for more unit tests. The distributed database person will always want things to go into their favorite database.&lt;/p&gt;
&lt;p&gt;It’s sort of like Minh’s cooking advice from King of The Hill: She tastes something and then says “Add Nutmeg”. When would nutmeg not be a good fit? Doesn’t all advice need to be contingent?&lt;/p&gt;
&lt;div class=&quot;align-right&quot;&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/thought-leaders/nutmeg-500-7afff0714.webp 500w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/thought-leaders/nutmeg-500-821cf96ec.png 500w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;400px&quot; src=&quot;/blog/generated/assets/images/thought-leaders/nutmeg-800-821cf96ec.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;figcaption&gt;
The solution to every problem can’t be the same
&lt;/figcaption&gt;
&lt;/div&gt;
&lt;p&gt;Non-contingent advice is what I think of when I hear the term thought-leader - someone has a single solution that seems to fit every problem. Whatever problem you face, the answer is test-driven-development or stream-architectures or being-really-truly-agile.&lt;/p&gt;
&lt;p&gt;I get frustrated by advice like that but is it wrong? Unit testing, streaming architectures, agile are all good things. I don’t write code in a test-driven style, but I did try it out a bit when it was the hot-thing™, and I learned a lot from the process. All of the thought-leaders are trying to move the industry forward. Still, there is some evidence that non-contingent, one-big-idea advice is less valuable than more nuanced, complicated advice.&lt;/p&gt;
&lt;h2 id=&quot;decision-making-research&quot;&gt;Decision-Making Research&lt;/h2&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/thought-leaders/fork-800-2b7fa89b7.webp 800w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/thought-leaders/fork-800-16d07ab07.png 800w&quot; type=&quot;image/png&quot;&gt;&lt;img src=&quot;/blog/generated/assets/images/thought-leaders/fork-800-16d07ab07.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;One way to think about advice is as a prediction. Advocating for Test-Driven-Development can be viewed as a prediction that if you don’t write tests before you write code, your project will be less well-designed and harder to maintain. Stream-Process-All-Things similarly predicts that if you approach a problem as one of streams you’ll get a better result than if you didn’t. Obviously, not all advice is tied to specific and explicit predictions, and many thought-leaders would object to the idea that just because they are always talking about a thing, that is the most critical thing in every case. But I do think it’s fair to say that if your proposed solution is always a variation of “use the actor system to model concurrency” or “you need a stronger allegiance to SOLID principles” then you believe those solutions would strongly increase desired project outcomes.&lt;/p&gt;
&lt;h2 id=&quot;tetlocks-hedgehogs&quot;&gt;Tetlock’s Hedgehogs&lt;/h2&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/thought-leaders/hedgehog-800-a1ac11be4.webp 800w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/thought-leaders/hedgehog-800-e849e8e15.png 800w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;1200px&quot; src=&quot;/blog/generated/assets/images/thought-leaders/hedgehog-800-e849e8e15.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;It turns out that &lt;a href=&quot;https://scholar.google.com/citations?user=CJjf6H0AAAAJ&amp;amp;hl=en&quot;&gt;Philip E. Tetlock&lt;/a&gt; from the University of Pennsylvania, who has been studying the judgment and decision making of experts for most of his career, has something to say about those types of predictions. And Tetlock is an expert on experts: his &lt;a href=&quot;https://en.wikipedia.org/wiki/The_Good_Judgment_Project&quot;&gt;Good Judgement Project&lt;/a&gt; was able to beat CIA analysts by 30% at predicting geo-political events. And the intelligence officers had access to classified information.&lt;/p&gt;
&lt;p&gt;Tetlock’s earliest work was the study of political experts. He solicited political advice and predictions from 284 experts between 1984 and 2004, and once enough time had passed to determine the accuracy of their forecasts, he scored the results. Political punditry is different from tech thought-leadership – none of my advice-givers were explicitly predicting a project outcome – but I think his findings have a lot to teach us.&lt;/p&gt;
&lt;p&gt;He found that experts could be split into two broad categories, the first of which he called Hedgehogs. A Hedgehog had one big idea like free-market capitalism (or Nordic model capitalism or demand-side economics), which they used as a lens to look at many issues. They applied this big idea to every situation, which resulted in non-contingent and straightforward advice. You always need more freedom, nutmeg, and unit tests. Hedgehogs are “Confident forecasters”.&lt;/p&gt;
&lt;h2 id=&quot;the-foxes&quot;&gt;The Foxes&lt;/h2&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/thought-leaders/foxes-800-5560f7120.webp 800w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/thought-leaders/foxes-800-b46ad7089.png 800w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;1200px&quot; src=&quot;/blog/generated/assets/images/thought-leaders/foxes-800-b46ad7089.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;When all the predictions were added up and scored, hedgehogs lost out to his second category: Foxes. Foxes were the opposite of hedgehogs. They had complicated advice and were skeptical of even their own predictions. Tetlock also found that foxes were less likely to be famous because contingent advice is harder to explain in a sound bite.&lt;/p&gt;
&lt;p&gt;Hedgehogs with predictions about the 2003 Iraq war existed on both sides of the political spectrum. They had theories based on over-arching political philosophy, but the best predictors of the outcomes were foxes who had in-depth knowledge of the region, not big theories.&lt;/p&gt;
&lt;h3 id=&quot;ignore-universal-solutions&quot;&gt;Ignore Universal Solutions&lt;/h3&gt;
&lt;p&gt;&lt;picture&gt;&lt;source srcset=&quot;/blog/generated/assets/images/thought-leaders/tools-800-1ce3fc773.webp 800w&quot; type=&quot;image/webp&quot;&gt;&lt;source srcset=&quot;/blog/generated/assets/images/thought-leaders/tools-800-af0026ab3.png 800w&quot; type=&quot;image/png&quot;&gt;&lt;img width=&quot;1200px&quot; src=&quot;/blog/generated/assets/images/thought-leaders/tools-800-af0026ab3.png&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;Tetlock’s &lt;a href=&quot;https://longnow.org/seminars/02007/jan/26/why-foxes-are-better-forecasters-than-hedgehogs/&quot;&gt;talk&lt;/a&gt; on this is subtitled “Ignore Confident Forecasters,” which I think is an excellent summary of his findings.&lt;/p&gt;
&lt;p&gt;Software development is full of confident forecasters. We are a pretty new field, and yet everyone seems so sure that they have the best solution to whatever problem is at hand. I’d like to hear more people saying things like, “in this specific context, test-coverage seem like an important metric,” or “StopLang is great if you can afford the GC, but if you can’t, then you should look at IronOre.” A great tool is not a universal tool it’s a tool well suited to a specific problem.&lt;/p&gt;
&lt;p&gt;The more universal a solution someone claims to have to whatever software engineering problem exists, and the more confident they are that it is a fully generalized solution, the more you should question them. The more specific and contingent the advice - the more someone says ‘it depends’ or ‘YourSQL works well in a read-heavy context with the following constraints’ the more likely they are to be leading you in the right direction. At least that’s what I have found.&lt;/p&gt;
&lt;p&gt;Here at Earthly, we’ve been talking to a lot of people about how they build software and doing a lot of writing. When meeting with someone or &lt;a href=&quot;/blog/unit-vs-integration&quot;&gt;writing down advice&lt;/a&gt;, I try to keep in mind Tetlock’s findings. I really think &lt;a href=&quot;https://earthly.dev&quot;&gt;repeatable builds&lt;/a&gt; are important, but if it’s my solution to every problem, then I think I’m probably falling into the same trap. So this post is my reminder to myself: Don’t be a &lt;del&gt;hedgehog&lt;/del&gt; thought-leader.&lt;/p&gt;</content><author><name>Adam Gordon Bell</name></author><category term="Articles" /><summary type="html">Here is a somewhat fictionalized personal story. I’ve changed the names of the people and the technology used.</summary></entry><entry><title type="html">Using Autotools to Configure, Make, and Install a Program</title><link href="https://earthly.dev/blog/autoconf/" rel="alternate" type="text/html" title="Using Autotools to Configure, Make, and Install a Program" /><published>2021-06-08T00:00:00-04:00</published><updated>2021-06-08T00:00:00-04:00</updated><id>https://earthly.dev/blog/autoconf</id><content type="html" xml:base="https://earthly.dev/blog/autoconf/">&lt;p&gt;&lt;a href=&quot;https://www.gnu.org/software/automake/manual/html_node/Autotools-Introduction.html&quot;&gt;Autotools&lt;/a&gt; is one of the most widely adopted code packaging and shipping tools available to developers on Linux. While there are alternatives, such as &lt;a href=&quot;https://cmake.org/&quot;&gt;CMake&lt;/a&gt;, &lt;a href=&quot;https://scons.org/&quot;&gt;SCons&lt;/a&gt;, and &lt;a href=&quot;https://www.boost.org/doc/libs/1_43_0/doc/html/jam/usage.html&quot;&gt;BJam&lt;/a&gt;, they don’t quite match Autotools in ease of use, power, and versatility.&lt;/p&gt;
&lt;p&gt;At its base, Autotools can help make your application more portable, give it the versatility to be installed on many different systems, and can automatically procure scripts to check where elements are, like the compiler for your program. In this article, you will learn how to use Autotools to package up an application and ship it.&lt;/p&gt;
&lt;h2 id=&quot;components-of-autotools&quot;&gt;Components of Autotools&lt;/h2&gt;
&lt;p&gt;Autotools is made up of three unique components:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;autoconf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;automake&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;aclocal&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Using these tools, you will create two files, &lt;code&gt;configure&lt;/code&gt; and &lt;code&gt;Makefile.in&lt;/code&gt;. These files are present in any project shipped using Autotools and are usually quite large and complex. Luckily, you don’t have to write them yourself—instead you’ll be writing the files &lt;code&gt;configure.ac&lt;/code&gt; and &lt;code&gt;Makefile.am&lt;/code&gt;, which will automatically generate the files you need.&lt;/p&gt;
&lt;h3 id=&quot;autoconf&quot;&gt;Autoconf&lt;/h3&gt;
&lt;p&gt;Autoconf is written in &lt;a href=&quot;https://www.gnu.org/software/autoconf/manual/autoconf-2.60/html_node/Programming-in-M4sh.html&quot;&gt;M4sh&lt;/a&gt;, using &lt;code&gt;m4&lt;/code&gt; macros. If you’ve heard of this before, then great! If you haven’t, no worries. &lt;code&gt;m4sh&lt;/code&gt; provides some macros you can use when creating your &lt;code&gt;configure.ac&lt;/code&gt; script and are part of why you can generate a massive &lt;code&gt;configure&lt;/code&gt; script without having to write too much actual code.&lt;/p&gt;
&lt;p&gt;The way it works is that you create a &lt;code&gt;configure.ac&lt;/code&gt; script in which you define various settings like release name, version, which compiler to use, and where it should output files. Once you’ve written your script, you run it through &lt;code&gt;autoconf&lt;/code&gt; to create your final &lt;code&gt;configure&lt;/code&gt; script. The purpose of &lt;code&gt;autoconf&lt;/code&gt; is to collect information from your system to populate the &lt;code&gt;Makefile.in&lt;/code&gt; template, which is created using &lt;code&gt;automake&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&quot;automake&quot;&gt;Automake&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;Makefile.am&lt;/code&gt; script creates &lt;code&gt;Makefile.in&lt;/code&gt;. The principles behind this are the same as with &lt;code&gt;configure.ac&lt;/code&gt;: write a simple script in order to create a complex file. Automake is the component you’ll use to create the Makefile, a template that can then be populated with &lt;code&gt;autoconf&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Automake does so using variables and &lt;a href=&quot;http://www.fifi.org/doc/autobook/html/autobook_37.html&quot;&gt;primaries&lt;/a&gt;. An example of such a primary is &lt;code&gt;bin_PROGRAMS = helloworld&lt;/code&gt;, where the primary is the &lt;code&gt;_PROGRAMS&lt;/code&gt; suffix. This primary gives &lt;code&gt;automake&lt;/code&gt; some knowledge about your program, like where you want the produced binary to be installed.&lt;/p&gt;
&lt;p&gt;In this case, you’re telling &lt;code&gt;automake&lt;/code&gt; to install the &lt;code&gt;helloworld&lt;/code&gt; binary in the path defined by the &lt;code&gt;bindir&lt;/code&gt;. You may notice we didn’t define a &lt;code&gt;bindir&lt;/code&gt; variable, because that variable is built into &lt;code&gt;automake&lt;/code&gt; and is typically the default binary directory of your system.&lt;/p&gt;
&lt;p&gt;Other examples of primaries are &lt;code&gt;_SCRIPTS&lt;/code&gt;, which you can use when you want a script, rather than a binary to be installed somewhere, and &lt;code&gt;_DATA&lt;/code&gt;, when you have extra data files you want included in your installation. There are many more that you will find once you start using Autotools and figure out what your needs are.&lt;/p&gt;
&lt;p&gt;One last thing to mention is that although &lt;code&gt;Makefile.in&lt;/code&gt; is special in that it contains all of these primaries, it’s still a regular Makefile. Meaning you can write your own custom make targets if you want. For example, if you want to have a custom &lt;code&gt;clean&lt;/code&gt; target that deletes specific files, you can do so easily.&lt;/p&gt;
&lt;h3 id=&quot;aclocal&quot;&gt;&lt;code&gt;Aclocal&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;This is the smallest component in the Autotools suite, but it’s very important. You learned in the previous section that &lt;code&gt;autoconf&lt;/code&gt; uses &lt;code&gt;m4&lt;/code&gt; macros to be configured. But where do these &lt;code&gt;m4&lt;/code&gt; macros come from? They’re generated by running the &lt;code&gt;aclocal&lt;/code&gt; command. Simple as that. If you don’t run &lt;code&gt;aclocal&lt;/code&gt; before running &lt;code&gt;autoconf&lt;/code&gt;, you’ll get an error complaining about missing macros.&lt;/p&gt;
&lt;h2 id=&quot;using-autotools&quot;&gt;Using Autotools&lt;/h2&gt;
&lt;p&gt;Now that you know the basic principles of how the Autotools suite is put together, it’s time to see it all in action and create a small C program that you can compile and ship.&lt;/p&gt;
&lt;h3 id=&quot;writing-the-source-program&quot;&gt;Writing the Source Program&lt;/h3&gt;
&lt;p&gt;The first thing you need is the program you want to compile and ship. Autotools is compatible with many different projects and languages, but for this example you’ll be working in &lt;code&gt;C&lt;/code&gt;, which is most commonly used. If you’re not familiar with &lt;code&gt;C&lt;/code&gt;, don’t worry, it’s very simple. Here’s your sample code:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb1&quot;&gt;&lt;pre class=&quot;sourceCode c&quot;&gt;&lt;code class=&quot;sourceCode c&quot;&gt;&lt;span id=&quot;cb1-1&quot;&gt;&lt;a href=&quot;#cb1-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;pp&quot;&gt;#include &lt;/span&gt;&lt;span class=&quot;im&quot;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-2&quot;&gt;&lt;a href=&quot;#cb1-2&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-3&quot;&gt;&lt;a href=&quot;#cb1-3&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-4&quot;&gt;&lt;a href=&quot;#cb1-4&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;main&lt;span class=&quot;op&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; argc&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;*&lt;/span&gt; argv&lt;span class=&quot;op&quot;&gt;[])&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-5&quot;&gt;&lt;a href=&quot;#cb1-5&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-6&quot;&gt;&lt;a href=&quot;#cb1-6&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;  printf&lt;span class=&quot;op&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;Hello World&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-7&quot;&gt;&lt;a href=&quot;#cb1-7&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;  &lt;span class=&quot;cf&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb1-8&quot;&gt;&lt;a href=&quot;#cb1-8&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As you can see, it simply includes a standard in/standard out library and then prints &lt;code&gt;Hello World\n&lt;/code&gt;. Let’s start with&lt;code&gt;autoconf&lt;/code&gt; to configure this project.&lt;/p&gt;
&lt;h3 id=&quot;configuring-configure.ac&quot;&gt;Configuring &lt;code&gt;configure.ac&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;When writing your &lt;code&gt;configure.ac&lt;/code&gt; file, there are a lot of options to choose from. You can get very specific about how you want your script to be configured, but some configurations need to be set. The first of these is &lt;code&gt;AC_INIT&lt;/code&gt;. This tells &lt;code&gt;autoconf&lt;/code&gt; what the name of your application is, what version it is, and who’s the maintainer. For this example, you’ll write:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb2&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb2-1&quot;&gt;&lt;a href=&quot;#cb2-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;AC_INIT&lt;/span&gt;&lt;span class=&quot;er&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ex&quot;&gt;[helloworld],&lt;/span&gt; [0.1], [maintainer@example.com]&lt;span class=&quot;kw&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;While &lt;code&gt;autoconf&lt;/code&gt; is generally used alongside &lt;code&gt;automake&lt;/code&gt;, it’s not necessary, so you need to initialize that by writing:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb3&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb3-1&quot;&gt;&lt;a href=&quot;#cb3-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;AM_INIT_AUTOMAKE&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now that the generic options are initialized, you can get more specific with what you want. You need to specify what compiler you want the &lt;code&gt;configure&lt;/code&gt; script to use. You do this by writing:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb4&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb4-1&quot;&gt;&lt;a href=&quot;#cb4-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;AC_PROG_CC&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will tell the &lt;code&gt;configure&lt;/code&gt; script to look for a &lt;code&gt;C&lt;/code&gt; &lt;a href=&quot;/blog/compiling-containers-dockerfiles-llvm-and-buildkit&quot;&gt;compiler&lt;/a&gt;. For other applications, you may need more dependencies to build your program. By using the &lt;code&gt;AC_PATH_PROG&lt;/code&gt; macro, you can make &lt;code&gt;autoconf&lt;/code&gt; look for specific programs in a user’s &lt;code&gt;PATH&lt;/code&gt;. At this point, there are only two steps needed to finish your basic &lt;code&gt;configure.ac&lt;/code&gt; script:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;AC_CONFIG_FILES([Makefile])
AC_OUTPUT&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;AC_CONFIG_FILES&lt;/code&gt; tells &lt;code&gt;autoconf&lt;/code&gt; that it should find a file called &lt;code&gt;Makefile.in&lt;/code&gt; and replace placeholders according to what we’ve specified. This can be things like version or maintainer. &lt;code&gt;AC_OUTPUT&lt;/code&gt; is the last thing you want to put in your &lt;code&gt;configure.ac&lt;/code&gt; script, as it tells &lt;code&gt;autoconf&lt;/code&gt; to output the final &lt;code&gt;configure&lt;/code&gt; script. In the end, your &lt;code&gt;configure.ac&lt;/code&gt; file should contain the following:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;AC_INIT([helloworld], [0.1], [maintainer@example.com])
AM_INIT_AUTOMAKE
AC_PROG_CC
AC_CONFIG_FILES([Makefile])
AC_OUTPUT&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;making-the-makefile&quot;&gt;Making the Makefile&lt;/h3&gt;
&lt;p&gt;When using &lt;code&gt;automake&lt;/code&gt;, you’ll have to adhere to a set of standards. One of these is that source files for a project are located in the &lt;code&gt;src&lt;/code&gt; folder. In this project, you have a single &lt;code&gt;main.c&lt;/code&gt; file in our root directory, so you need to tell &lt;code&gt;automake&lt;/code&gt; that:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb7&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb7-1&quot;&gt;&lt;a href=&quot;#cb7-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;AUTOMAKE_OPTIONS&lt;/span&gt; = foreign&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You need to tell &lt;code&gt;automake&lt;/code&gt; what you want your compiled binary to be called. In this case, you want it to be called &lt;code&gt;helloworld&lt;/code&gt;, so write the following:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb8&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb8-1&quot;&gt;&lt;a href=&quot;#cb8-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;bin_PROGRAMS&lt;/span&gt; = helloworld&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Only one thing left, and that is to tell &lt;code&gt;automake&lt;/code&gt; what files are needed to compile your application. Do this by writing:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb9&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb9-1&quot;&gt;&lt;a href=&quot;#cb9-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;ex&quot;&gt;helloworld_SOURCES&lt;/span&gt; = main.c&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice how the first part is the name of your application followed by the &lt;code&gt;SOURCES&lt;/code&gt; primary. Now &lt;code&gt;automake&lt;/code&gt; knows all that it needs to know, and your &lt;code&gt;Makefile.am&lt;/code&gt; is ready to use.&lt;/p&gt;
&lt;h3 id=&quot;creating-final-scripts&quot;&gt;Creating Final Scripts&lt;/h3&gt;
&lt;p&gt;Once you’ve written your &lt;code&gt;configure.ac&lt;/code&gt; and &lt;code&gt;Makefile.am&lt;/code&gt;, it’s relatively straightforward to distribute your application. Remember to start by running &lt;code&gt;aclocal&lt;/code&gt; so you can run &lt;code&gt;autoconf&lt;/code&gt;. Once you’ve run &lt;code&gt;autoconf&lt;/code&gt;, you can run &lt;code&gt;automake --add-missing&lt;/code&gt; to build your &lt;code&gt;Makefile.in&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The reason for the &lt;code&gt;--add-missing&lt;/code&gt; flag is to tell &lt;code&gt;automake&lt;/code&gt; to automatically generate all of the additional files required, as usually you need more than just &lt;code&gt;Makefile.am&lt;/code&gt; and would have to manually enter in the other files.&lt;/p&gt;
&lt;p&gt;At this point, you have all you need to distribute your program. Before moving on on, here’s a short recap showing the commands you should’ve run by now:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb10&quot;&gt;&lt;pre class=&quot;sourceCode bash&quot;&gt;&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span id=&quot;cb10-1&quot;&gt;&lt;a href=&quot;#cb10-1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;fu&quot;&gt;aclocal&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb10-2&quot;&gt;&lt;a href=&quot;#cb10-2&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;fu&quot;&gt;autoconf&lt;/span&gt;&lt;/span&gt;
&lt;span id=&quot;cb10-3&quot;&gt;&lt;a href=&quot;#cb10-3&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;span class=&quot;fu&quot;&gt;automake&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;--add-missing&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;distributing-the-program&quot;&gt;Distributing the Program&lt;/h3&gt;
&lt;p&gt;Distributing your application can seem like a daunting task, but Autotools makes it super easy. All you have to do is run &lt;code&gt;make dist&lt;/code&gt; after you’ve run the configure scripts above. This will produce a tarball, which you can then ship to your customers.&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Now you’re able to use Autotools to compile and distribute your application, and you’re able to do it in a way that ensures it’s portable across a variety of systems. From here, you can start looking into automating this procedure and other ways to integrate Autotools directly into your daily development.&lt;/p&gt;
&lt;p&gt;The great advantage of using something like Autotools is that you’ll be using a system that has been in place for many years, is well-documented, and widely used. Many developers are comfortable installing applications using what Autotools produces, so it can make your application much more familiar and accessible.&lt;/p&gt;
&lt;p&gt;If your project becomes more complex and Autotools maintenance becomes a burden, &lt;a href=&quot;https://earthly.dev/&quot;&gt;earthly&lt;/a&gt; is a great solution for containerized builds.&lt;/p&gt;</content><author><name>Kasper Siig</name></author><category term="Tutorial" /><summary type="html">Autotools is one of the most widely adopted code packaging and shipping tools available to developers on Linux. While there are alternatives, such as CMake, SCons, and BJam, they don’t quite match Autotools in ease of use, power, and versatility.</summary></entry><entry><title type="html">Achieving Repeatability in Continuous Integration</title><link href="https://earthly.dev/blog/achieving-repeatability/" rel="alternate" type="text/html" title="Achieving Repeatability in Continuous Integration" /><published>2021-06-01T00:00:00-04:00</published><updated>2021-06-01T00:00:00-04:00</updated><id>https://earthly.dev/blog/achieving-repeatability</id><content type="html" xml:base="https://earthly.dev/blog/achieving-repeatability/">&lt;blockquote&gt;
&lt;p&gt;In software engineering, continuous integration is the practice of merging all developers’ working copies to a shared mainline several times a day. Grady Booch first proposed the term CI in his 1991 method, although he did not advocate integrating several times a day. —&lt;a href=&quot;https://en.wikipedia.org/wiki/Continuous_integration&quot; title=&quot;Wikipedia article on continuous integration&quot;&gt;Wikipedia&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Continuous Integration (CI) and continuous delivery (CD) are some of the best practices that any DevOps team can implement. You could argue that they’re necessary for teams looking to ship quality products fast and with confidence.&lt;/p&gt;
&lt;p&gt;CI and CD are two pieces of a whole, the former dealing with the task to automate the process of building, testing, and integrating new features and code changes into the codebase mainline; and the latter dealing with automating the process of delivering the changes to the defined environments.&lt;/p&gt;
&lt;p&gt;The implementation of both methodologies is often referred to as a &lt;strong&gt;CI/CD pipeline&lt;/strong&gt;; it is worth noting that both for CI and CD, the operating principles and coding philosophy are equally as important as the technical aspect of the implementation.&lt;/p&gt;
&lt;p&gt;CI’s technical goal is to provide consistent and automated results to build, package, and test applications. This repeatable flow and process allows teams to commit and merge changes more frequently, thus reducing the risk of conflicts or getting stuck in &lt;strong&gt;Integration Hell&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Integration Hell refers to the point in production when members on a delivery team integrate their individual code. In traditional software development environments, this integration process is rarely smooth and seamless, instead resulting in hours or perhaps days of fixing the code so that it can finally integrate. Continuous Integration (CI) aims to avoid this completely by enabling and encouraging team members to integrate frequently (e.g., hourly, or at least daily). —&lt;a href=&quot;https://www.solutionsiq.com/agile-glossary/integration-hell/&quot; title=&quot;Accenture | SolutionsIQ&amp;#39;s definition of Integration Hell&quot;&gt;SolutionsIQ&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This article focuses on the concepts, tools, and best practices that will allow you to achieve a high degree of repeatability and consistency on your CI/CD pipeline.&lt;/p&gt;
&lt;h2 id=&quot;ci-repeatability-principles&quot;&gt;CI Repeatability Principles&lt;/h2&gt;
&lt;p&gt;One of the critical aspects of a successful and healthy CI pipeline is having repeatable builds, which guarantee consistent and reliable results. Four fundamental principles are essential to observe to achieve repeatability:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Reliability&lt;/li&gt;
&lt;li&gt;Reproducibility&lt;/li&gt;
&lt;li&gt;Reusability&lt;/li&gt;
&lt;li&gt;Speed&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;reliability&quot;&gt;Reliability&lt;/h3&gt;
&lt;p&gt;Reliability in continuous integration comes from knowing that the systems involved in testing the application are both available and capable of performing the complete set of tests that we need. This also means that the system has to produce consistent builds.&lt;/p&gt;
&lt;p&gt;Reliability gives the confidence to deliver shippable working code at any time during the application lifetime.&lt;/p&gt;
&lt;h3 id=&quot;reproducibility&quot;&gt;Reproducibility&lt;/h3&gt;
&lt;p&gt;CI infrastructure and pipelines can be—and more often than not, are—software assets on their own. The work done to create and implement CI runners and pipelines for our software projects can also be built, tested, and packaged just like any other software build.&lt;/p&gt;
&lt;p&gt;Examples of this are containerizing the environments used to run your test suites, including dependencies such as a database or ancillary applications for the end-to-end test suites.&lt;/p&gt;
&lt;p&gt;Treating the CI pipelines as another software project also allows the development team to reproduce the same results from the CI pipeline locally and shorten the feedback loop.&lt;/p&gt;
&lt;h3 id=&quot;reusability&quot;&gt;Reusability&lt;/h3&gt;
&lt;p&gt;With reproducible builds, we can achieve reusability, meaning that the same tools and process can be used in more than one project. Having a system in which we are not building a special custom CI pipeline for each project allows us to find patterns that we can apply to many projects.&lt;/p&gt;
&lt;p&gt;The type of reusable resources greatly varies depending on the type of applications and tests on each organization, from simple reusable scripts to containerized environments.&lt;/p&gt;
&lt;h3 id=&quot;speed&quot;&gt;Speed&lt;/h3&gt;
&lt;p&gt;One of the primary benefits of a good and effective CI process is the feedback loop it provides to the developers working on a project. Feedback loops start losing their value and &lt;a href=&quot;https://martinfowler.com/articles/developer-effectiveness.html&quot; title=&quot;Tim Cochran&amp;#39;s article on maximizing developer effectiveness at MartinFowler.com&quot;&gt;detract from developer effectiveness as they get slower&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We need to consider several factors when building a support CI pipeline, from the underlying hardware and test runners to the structure of the unit tests themselves as a larger unit. Integration tests do add to the overall testing time, and it’s important to keep that time short to make the value of the tests high.&lt;/p&gt;
&lt;h2 id=&quot;best-practices&quot;&gt;Best Practices&lt;/h2&gt;
&lt;p&gt;Now that we understand why &lt;strong&gt;reusability&lt;/strong&gt;, &lt;strong&gt;reproducibility&lt;/strong&gt;, &lt;strong&gt;reliability&lt;/strong&gt;, and &lt;strong&gt;speed&lt;/strong&gt; are important for building repeatable and effective continuous integration pipelines, let’s talk about specific practices and processes that can help achieve them.&lt;/p&gt;
&lt;h3 id=&quot;test-automation-and-coverage&quot;&gt;Test Automation and Coverage&lt;/h3&gt;
&lt;p&gt;To leverage the full value of continuous integration, you will need to automate all your tests and make sure they run for every change made to the repository. It’s also advisable to leverage the following:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Unit tests&lt;/strong&gt; to verify the behavior of small methods and functions&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Integration tests&lt;/strong&gt; to make sure multiple components work together&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Acceptance tests&lt;/strong&gt; to cover behavior required on the business specifications&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;End-to-end tests&lt;/strong&gt; to validate the behavior of the application as a whole from the user perspective&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;adopting-continuous-integration&quot;&gt;Adopting Continuous Integration&lt;/h3&gt;
&lt;p&gt;While automation and observability of our pipelines are important, the cultural aspects of working with continuous integration and ensuring that the team adopts the continuous integration principles are equally as important.&lt;/p&gt;
&lt;h4 id=&quot;integrate-early-and-often&quot;&gt;Integrate Early and Often&lt;/h4&gt;
&lt;p&gt;A crucial cultural aspect of continuous integration is building the habit and cadence of the team committing their code every day and multiple times per day. By pushing their code frequently, developers can quickly find conflicts between two changes and also become aware of other work.&lt;/p&gt;
&lt;p&gt;Additionally, pushing their commits often allows developers to get feedback from the full CI pipeline running and allow them to identify defects in the code much sooner.&lt;/p&gt;
&lt;p&gt;The rule of thumb is that developers should commit their code every day, whether it is to the mainline branch on a feature branch. The more frequently you commit, the less opportunity there will be for conflict, errors, or broken tests, significantly increasing the team’s speed.&lt;/p&gt;
&lt;h4 id=&quot;fail-early-and-fail-fast&quot;&gt;Fail Early and Fail Fast&lt;/h4&gt;
&lt;p&gt;The whole point of continuous integration is providing rapid feedback. Nothing is more frustrating than a build that takes hours to complete, only to fail because of errors in some of the initial test suites.&lt;/p&gt;
&lt;p&gt;It is possible that due to the size of the application, the complete set of tests (unit, integration, end-to-end) might take a while to run. To help things go smoothly, you should consider the following processes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Breaking tests into groups (per module, per domain, and so forth) and running them in parallel&lt;/li&gt;
&lt;li&gt;Run critical path tests first (core or fundamental logic)&lt;/li&gt;
&lt;li&gt;Fail and stop the entire build if critical tests fail&lt;/li&gt;
&lt;li&gt;Integrate with notifications systems (Slack, email) to let developers know as soon things fail&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;make-it-visible&quot;&gt;Make It Visible&lt;/h4&gt;
&lt;p&gt;A core tenet of continuous integration is communication, so you want to ensure that everyone can easily see the state of the system and the changes that have been made to it.&lt;/p&gt;
&lt;p&gt;Information such as the states of integration branches and the state of the mainline build become a priority. Back in the day, engineering teams would go as far as hooking up physical traffic lights to signal the state of the mainline branch.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/blog/assets/images/achieving-repeatability/anBo2up.png&quot; alt=&quot;Semaphore CI&quot; /&gt;&lt;figcaption aria-hidden=&quot;true&quot;&gt;Semaphore CI&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Nowadays, with cloud solutions being more prevalent and deeply integrated with source control systems, it’s much easier to give all developers a high degree of visibility. A perfect example is CI pipelines with &lt;a href=&quot;https://github.com/features/actions&quot; title=&quot;GitHub Actions workflow automation&quot;&gt;GitHub Actions&lt;/a&gt;, which provides feedback directly on pull requests and allows you to visualize the state of a pipeline at every given step.&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&quot;/blog/assets/images/achieving-repeatability/twM26E6.png&quot; alt=&quot;GitHub Actions CI&quot; /&gt;&lt;figcaption aria-hidden=&quot;true&quot;&gt;GitHub Actions CI&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h4 id=&quot;fix-broken-builds-immediately&quot;&gt;Fix Broken Builds Immediately&lt;/h4&gt;
&lt;p&gt;A crucial part of implementing continuous integrations is that if the mainline build fails, it needs to be fixed right away. One of the key points of working with CI is having a trusted, stable code base to develop against.&lt;/p&gt;
&lt;p&gt;The mainline build breaking is not necessarily a bad thing on its own. Still, it might highlight gaps in how the team works, like people not being careful enough about updating and building locally before committing.&lt;/p&gt;
&lt;p&gt;The fastest way to fix a broken build is to roll back to the last known good commit and review what happened. By all means, we should avoid debugging on the broken mainline; this becomes especially true when multiple teams are working on the same code base.&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Continuous integration reduces risk by eliminating long integration efforts and reducing the feedback loops. To recap, there are many advantages to implementing continuous integration in your teams:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Allows identifying bugs and software defects faster&lt;/li&gt;
&lt;li&gt;Reduces the feedback loop for engineers&lt;/li&gt;
&lt;li&gt;Removes blind spots that can occur with deferred integration&lt;/li&gt;
&lt;li&gt;Improves communication and velocity of the engineering teams&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To achieve repeatability in a CI/CD pipeline, it’s essential to keep in mind the following principles:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Reliable&lt;/strong&gt; continuous integration environments help us avoid slowing down the feedback loops for the developers and maintain &lt;strong&gt;speed&lt;/strong&gt; of development.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Reproducible&lt;/strong&gt; builds give our developers confidence to keep momentum and keep building with confidence.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Reusability&lt;/strong&gt; allows us to leverage the tools, patterns, and environments for continuous integration across projects.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Speed&lt;/strong&gt; reduces the feedback cycle for developers, allowing them to ship more features in a shorter time.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Finally, having continuous integration and continuous delivery removes one of the biggest barriers to implementing &lt;strong&gt;continuous deployment&lt;/strong&gt;. Continuous deployment extends this flow and enables fully automated deployments into production.&lt;/p&gt;
&lt;p&gt;The combination of continuous integration, continuous delivery, and continuous deployment allows teams to ship features faster and get them in front of customers faster, shortening the feedback loop and increasing value generation.&lt;/p&gt;
&lt;p&gt;For anyone looking to learn more about continuous integration, I highly recommend &lt;a href=&quot;https://martinfowler.com/&quot;&gt;Martin Fowler’s&lt;/a&gt; book &lt;a href=&quot;https://www.martinfowler.com/books/duvall.html&quot; title=&quot;Continuous Integration by Martin Fowler&quot;&gt;Continuous Integration&lt;/a&gt;.&lt;/p&gt;</content><author><name>Allan MacGregor</name></author><category term="Tutorials" /><summary type="html">In software engineering, continuous integration is the practice of merging all developers’ working copies to a shared mainline several times a day. Grady Booch first proposed the term CI in his 1991 method, although he did not advocate integrating several times a day. —Wikipedia</summary></entry></feed>